{"version":3,"file":"vue.js","sources":["../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/observe/watcher.js","../src/state.js","../src/compiler/parse.js","../src/compiler/index.js","../src/vdom/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/utils.js","../src/init.js","../src/global.js","../src/index.js"],"sourcesContent":["let oldArrayproto = Array.prototype;\r\n\r\nexport let newArrayproto = Object.create(oldArrayproto);\r\n\r\nlet methods = [\r\n    \"shift\",\r\n    \"unshift\",\r\n    \"pop\",\r\n    \"push\",\r\n    \"reverse\",\r\n    \"sort\",\r\n    \"splice\"\r\n]// concat slice不会改变原数组\r\n\r\nmethods.forEach((method) => {\r\n    newArrayproto[method] = function(...args){  // 重写数组的方法\r\n        const result = oldArrayproto[method].call(this,...args);   // 内部调用原来的方法，函数劫持 切片编程\r\n        // console.log(method);\r\n\r\n        // 对对新增的数据再次观测\r\n        let inserted;\r\n        let ob = this.__ob__;  //外部data调用方法，所以this就指向data\r\n        switch(method){\r\n            case 'push':\r\n            case \"unshift\":     //vm.arr.unshift({a: 100})\r\n                inserted = args;\r\n                break;\r\n            case \"splice\":      //vm.arr.splice(0, 1, 55,56,57)\r\n                inserted = args.slice(2);\r\n                break;\r\n        }\r\n        // console.log(inserted);\r\n        if(inserted){\r\n            ob.observeArray(inserted)\r\n        }\r\n        ob.dep.notify();//让对象和数组本身也响应\r\n        return result;\r\n    }\r\n})\r\n\r\n","let id = 0;\r\n\r\nexport class Dep{\r\n    constructor(){\r\n        this.id = id++      // 属性的dep要收集watcher\r\n        this.subs = [];     //这里存放着当前属性对应的wetcher有哪些\r\n    }\r\n    depend(){\r\n        // 不希望放重复的watcher 而且刚才只是一个单向的关系  dep => Watcher\r\n        // this.subs.push(Dep.target);\r\n\r\n        Dep.target.addDep(this) //让watcher记住dep  双向\r\n        // watcher和Dep是一个多对多的关系(一个属性可以再多个组件中使用dep -> 多个watcher)\r\n        // 一个组件中由多个属性组成(一个watcher对应多个dep)\r\n    }\r\n    addSub(watcher){\r\n        this.subs.push(watcher)\r\n    }\r\n    notify(){\r\n        this.subs.forEach(watcher=>watcher.updata())\r\n    }\r\n}\r\n\r\nDep.target = null;\r\n\r\nlet stack = []\r\nexport function pushTarget(watcher){\r\n    // debugger\r\n    stack.push(watcher);\r\n    Dep.target = watcher\r\n}\r\nexport function popTarget(){\r\n    // debugger\r\n    stack.pop();\r\n    Dep.target = stack[stack.length - 1]\r\n}","import {newArrayproto} from './array'\r\nimport {Dep} from './dep'\r\n\r\nclass Observe{\r\n    constructor(data){\r\n        this.dep = new Dep();//所有对象也增加dep\r\n        // Object.defineProperty只能劫持已经存在的属性，vue2的$set就是为后加的属性添加响应式\r\n\r\n        // data.__ob__ = this //给data加上walk observeArray方法，array.js要使用以给新数据加上数据监测\r\n        // data.__ob__ = this;会发生死循环，__ob__会被当做walk的key,defineReactive\r\n        // 中调用observe，再次return new Observe(data)，又加上data.__proto__ = newArrayproto;\r\n        // 再次执行walk,陷入死循环，所以修改该属性为不可枚举即可解决\r\n        Object.defineProperties(data,{\r\n            ['__ob__']: \r\n            {\r\n                value: this,\r\n                enumerable: false\r\n            }\r\n        })\r\n\r\n        // 不能给数组中的每个基本数据类型加上响应式，但是引用数据类型要加上响应式\r\n        if(Array.isArray(data)){\r\n            data.__proto__ = newArrayproto\r\n            // 这里我们要重新重写数组的7个方法，但同时保留其他的方法\r\n            this.observeArray(data)\r\n        } else{\r\n            this.walk(data) \r\n        }              \r\n    }\r\n    walk(data){\r\n        // 重新定义属性  性能不太行\r\n        Object.keys(data).forEach(key => defineReactive(data,key,data[key]))\r\n    }\r\n    observeArray(data){\r\n        data.forEach(item => observe(item))\r\n    }\r\n}\r\nfunction dependArray(value){\r\n    for(let i = 0;i<value.length; i++){\r\n        let current = value[i];\r\n        current.__ob__ && current.__ob__.dep.depend();\r\n        if(Array.isArray(current)){\r\n            dependArray(current)\r\n        }\r\n    }\r\n}\r\nexport function defineReactive(target, key, value) {\r\n    let childDep = observe(value);    \r\n    let dep = new Dep();\r\n    // console.log(dep,key);\r\n    Object.defineProperties(target, {\r\n        [key]: {\r\n            get() {\r\n                if(Dep.target){\r\n                    dep.depend();//让这个属性收集器记住当前的watch\r\n                    if(childDep){  \r\n                        childDep.dep.depend();//让对象和数组本身也依赖收集\r\n                        if(Array.isArray(value)){\r\n                            dependArray(value)\r\n                        }\r\n                    }\r\n                }\r\n                //修改数组元素为基本数据类型时之所以会有这个log，应该是外层的数据的get,\r\n                //不会出现打印console.log(\"用户取值了\", value); 的value为数组元素为基本数据类型的情况\r\n                // console.log(\"用户取值了\", value); \r\n                return value;\r\n            },\r\n            set(newValue) {\r\n                // console.log(\"用户更改值了\");\r\n                if (value === newValue) return;\r\n                observe(newValue);  // 每一个新值也同样需要进行数据代理\r\n                value = newValue;\r\n                dep.notify()\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport function observe(data){    \r\n    if(typeof data !== 'object' || data == null){\r\n        return;     // 只对对象数据劫持\r\n    }\r\n    if(data.__ob__ instanceof Observe) {    // 说明数据已经被劫持过，直接返回\r\n        return data.__ob__\r\n    }\r\n\r\n    // 被劫持过则不需要在劫持(判断是否被劫持,可以增添一个实例，用实例来判断是否被劫持过)\r\n    return new Observe(data)\r\n}","import { Dep, pushTarget, popTarget } from \"./dep\";\r\n\r\nlet id = 0;\r\n\r\n// 给每个属性增加一个dep\r\nexport class Watcher{\r\n    constructor(vm, exprOrFn, options, cb){\r\n        this.id = id++;\r\n        this.renderWatcher = options;//表示是一个渲染函数\r\n        if(typeof exprOrFn === 'string'){\r\n            this.getter = function(){\r\n                // console.log(\"cb: \", cb);\r\n                // console.log(\"options: \", options);\r\n                // console.log(\"exprOrFn: \", exprOrFn);\r\n                // console.log(\"vm[exprOrFn]: \", vm[exprOrFn]);\r\n                return vm[exprOrFn]\r\n            }\r\n        }else{\r\n            // console.log(\"exprOrFn: \", exprOrFn);\r\n            this.getter = exprOrFn;//getter意味着这个函数可以发生取值操作\r\n        }\r\n        this.deps = [];     //后续实现计算属性和一些清理工作需要用到\r\n        this.depsId =new Set();\r\n        this.lazy = options.lazy\r\n        this.cb = cb\r\n        this.dirty = this.lazy\r\n        this.vm = vm\r\n        this.user = options.user;\r\n        \r\n        this.value = this.lazy ? undefined : this.get()   //意味着这个函数发生取值操作\r\n    }\r\n    get(){\r\n        // this:更新函数所在的那个watcher  类中的this都是实例 这里的this=> Watcher\r\n        // Dep.target = this;  //静态属性就是只有一份  实现计算属性时替换为pushTarget(this)\r\n        pushTarget(this)\r\n        let value = this.getter.call(this.vm);//会去vm上取值  \r\n        // Dep.target = null;   //实现计算属性时替换为popTarget()\r\n        popTarget()\r\n        return value\r\n    }\r\n    evaluate(){        \r\n        // 获取到用户函数的返回值，同时还要将dirty改为false,标识为脏\r\n        this.value = this.get();\r\n        this.dirty = false;\r\n    }\r\n    depend(){\r\n        let i = this.deps.length;\r\n        while(i--){         \r\n            // debugger               \r\n            this.deps[i].depend()   //让计算属性watcher也收集渲染watcher\r\n        }\r\n    }\r\n    addDep(dep){    //一个事件对应着多个属性 重复的属性也不用记录\r\n        let id = dep.id;\r\n        if(!this.depsId.has(id)){\r\n            this.deps.push(dep);\r\n            this.depsId.add(id);\r\n            dep.addSub(this);   //watcher已经记住了dep,此时让dep也记住watcher\r\n        }\r\n    }\r\n    updata(){\r\n        if(this.lazy){\r\n            this.dirty = true\r\n        }else{\r\n            // this.get()  //重新更新\r\n            queueWatcher(this)  //把当前watcher存起来  放到一个队列里\r\n        }\r\n    };\r\n    run(){\r\n        let oldValue = this.value;\r\n        let newValue = this.get();\r\n        if(this.user){\r\n            this.cb.call(this.vm, newValue, oldValue)\r\n        }\r\n    }\r\n}\r\nlet queue = [];\r\nlet has = {};\r\nlet pending = false;    //防抖\r\nfunction flushSchedulerQueue(){\r\n    let flusherQueue = queue.slice(0);\r\n    has = {};\r\n    queue = [];\r\n    pending = false;\r\n    flusherQueue.forEach((q)=>{\r\n        q.run()})\r\n}\r\nfunction queueWatcher(watcher){\r\n    const id = watcher.id;\r\n    if(!has[id]){   //一个watcher不重复刷新\r\n        queue.push(watcher);\r\n        has[id] = true;\r\n        if(!pending){\r\n            // setTimeout(flushSchedulerQueue,0)\r\n            nextTick(flushSchedulerQueue, 0)\r\n            pending = true\r\n        }\r\n    }\r\n}\r\n\r\nlet callbacks = [];\r\nlet waiting = false;\r\nfunction flushCallbacks(){\r\n    let cbs = callbacks.slice(0);\r\n    waiting = false;\r\n    callbacks = [];\r\n    cbs.forEach((cb)=>cb())\r\n}\r\n// nextTick没有直接使用某个api，而是采用优雅降级的方式\r\n// 内部先采用的是Promise,MutationObserver(h5的api), \r\nlet timeFunc;       //初始化文件时确定了该函数\r\nif(Promise){\r\n    timeFunc = ()=>{\r\n        Promise.resolve().then(flushCallbacks)\r\n    }\r\n}else if(MutationObserver){\r\n    let observer = new MutationObserver(flushCallbacks) //这里传入的回调是异步执行的\r\n    let textNode = document.createTextNode(1);\r\n    observer.observe(textNode,{\r\n        characterData: true\r\n    });\r\n    timeFunc = () => {\r\n        textNode.textContent = 2;\r\n    }\r\n}else if(setImmediate){\r\n    timeFunc = ()=>{\r\n        setImmediate(flushCallbacks);\r\n    }\r\n}else{\r\n    timeFunc = () => {\r\n        setTimeout(flushCallbacks)\r\n    }\r\n}\r\nexport function nextTick(cb){\r\n    callbacks.push(cb); //维护nextTick中的callback方法\r\n    if(!waiting){\r\n        // setTimeout(()=>{\r\n        //     flushCallbacks();\r\n        // }, 0)\r\n        timeFunc();\r\n        waiting = true;\r\n    }\r\n}","import { observe } from \"./observe/index\";\r\nimport { Dep } from \"./observe/dep\";\r\nimport { Watcher, nextTick } from './observe/watcher';\r\n\r\nexport default function initState(vm){\r\n    const opts = vm.$options;\r\n    if(opts.data){\r\n        initData(vm);\r\n    }\r\n    if(opts.computed){\r\n        // debugger\r\n        initComputed(vm);\r\n    }\r\n    if(opts.watch){\r\n        // debugger\r\n        initWatch(vm);\r\n    }\r\n}\r\n// vm._data 用vm 代理 使得读取vm._data.name可以简化为vm.name\r\nfunction proxy(vm, target, key){\r\n    Object.defineProperties(vm,{\r\n        [key]:\r\n        {\r\n            get(){\r\n                return vm[target][key]\r\n            },\r\n            set(newvalue){                \r\n                if(vm[target][key] === newvalue) return\r\n                vm[target][key] = newvalue\r\n            }\r\n        }\r\n    })\r\n}\r\nfunction initData(vm){\r\n    let data = vm.$options.data\r\n    data = typeof data === 'function' ? data.call(vm) : data;\r\n    vm._data = data;\r\n    // console.log(vm._data === data); // true\r\n    // 数据劫持\r\n    observe(data)   //Object.defineProperties重新递归定义递归\r\n\r\n    // vm._data 用vm 代理 使得读取vm._data.name可以简化为vm.name\r\n    for(let key in data){\r\n        proxy(vm, \"_data\", key)\r\n    }\r\n}\r\n\r\nfunction initWatch(vm){\r\n    let watch = vm.$options.watch\r\n    for(let key in watch){\r\n        const handler = watch[key]; //字符串 数组 函数\r\n        // console.log(\"key: \", key, \"handler: \", handler);\r\n        if(Array.isArray(handler)){\r\n            for(let i=0; i< handler.length; i++){\r\n                createWatcher(vm, key, handler[i])\r\n            }\r\n        }else{\r\n            createWatcher(vm, key, handler)\r\n        }\r\n    }\r\n}\r\nfunction createWatcher(vm, key, handler){\r\n    // 字符串 函数\r\n    if(typeof handler === 'string'){\r\n        handler = vm[handler];\r\n    }\r\n    return vm.$watch(key, handler)\r\n}\r\n\r\nfunction initComputed(vm){\r\n    let computed = vm.$options.computed\r\n    // 将计算属性的getter保存到vm上\r\n    const watchers = vm._createComputedGetter = {} \r\n    for(let key in computed){\r\n        let userDef = computed[key];    \r\n\r\n        const fn = typeof userDef === 'function' ? userDef : userDef.get;\r\n        // 1> {lazy:true}是不希望上来就执行fn 像一般的渲染watcher会直接执行get(),也就是渲染函数\r\n        // 2> 将属性和watcher对应起来\r\n        watchers[key] = new Watcher(vm, fn, {lazy:true})\r\n\r\n        defineComputed(vm, key, userDef)\r\n    }\r\n    \r\n}\r\nfunction defineComputed(target, key, userDef){\r\n    const setter = userDef.set || (() => {})\r\n    Object.defineProperty(target,key, {\r\n            get:createComputedGetter(key),\r\n            set:setter\r\n    })\r\n}\r\nfunction createComputedGetter(key){\r\n    // 监测是否要执行这个getter\r\n    return function(){\r\n        // 获取到对应的watcher\r\n        const watcher = this._createComputedGetter[key]\r\n        if(watcher.dirty){\r\n            // 求值后dirty为true, 下次就不求了\r\n            watcher.evaluate()\r\n        }\r\n        if(Dep.target){     //渲染watcher                       \r\n            watcher.depend();   //计算属性出栈后，应该让计算属性watcher里面的属性也去收集上层watcher\r\n            // 去收集上一层的watcher\r\n        }\r\n        return watcher.value\r\n    }\r\n\r\n}\r\nexport function initStateMixin(Vue){\r\n    Vue.prototype.$nextTick = nextTick;\r\n    Vue.prototype.$watch = function(exprOrFn, cb, options = {}){\r\n        // console.log('exprOrFn: ',exprOrFn,\"cb: \", cb, \"options: \",options);\r\n    \r\n        // work的值发生变化了，直接执行cb函数即可\r\n        new Watcher(this, exprOrFn, {user: true}, cb)\r\n    }\r\n}","// Regular Expressions for parsing tags and attributes\r\nvar attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nvar dynamicArgAttribute = /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nvar unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\r\n// var ncname = \"[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z\".concat(unicodeRegExp.source, \"]*\");\r\nvar ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nvar qnameCapture = \"((?:\".concat(ncname, \"\\\\:)?\").concat(ncname, \")\");\r\nvar startTagOpen = new RegExp(\"^<\".concat(qnameCapture));\r\nvar startTagClose = /^\\s*(\\/?)>/;\r\nvar endTag = new RegExp(\"^<\\\\/\".concat(qnameCapture, \"[^>]*>\"));\r\nvar doctype = /^<!DOCTYPE [^>]+>/i;\r\n// #7298: escape - to avoid being passed as HTML comment when inlined in page\r\nvar comment = /^<!\\--/;\r\nvar conditionalComment = /^<!\\[/;\r\n// Special Elements (can contain anything)\r\n// var isPlainTextElement = makeMap('script,style,textarea', true);\r\nvar reCache = {};\r\nvar decodingMap = {\r\n    '&lt;': '<',\r\n    '&gt;': '>',\r\n    '&quot;': '\"',\r\n    '&amp;': '&',\r\n    '&#10;': '\\n',\r\n    '&#9;': '\\t',\r\n    '&#39;': \"'\"\r\n};\r\nvar encodedAttr = /&(?:lt|gt|quot|amp|#39);/g;\r\nvar encodedAttrWithNewLines = /&(?:lt|gt|quot|amp|#39|#10|#9);/g;\r\nvar defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\nvar regexEscapeRE = /[-.*+?^${}()|[\\]\\/\\\\]/g;\r\n\r\nexport function parseHTML(html){\r\n    const ELEMENT_TYPE = 1;\r\n    const TEXT_TYPE = 3;\r\n    let stack = [];\r\n    let currentParent;\r\n    let root;\r\n    function createASTElement(tag, attrs){\r\n        return {\r\n            tag,\r\n            type: ELEMENT_TYPE, \r\n            children: [],\r\n            attrs,\r\n            parent: null\r\n        }\r\n    };    \r\n    function start(tar, attrs){\r\n        // debugger\r\n        let node = createASTElement(tar,attrs);\r\n        if(!root){\r\n            root = node\r\n        }\r\n        if(currentParent){\r\n            node.parent = currentParent\r\n            currentParent.children.push(node)\r\n            // console.log(currentParent);\r\n        }\r\n        stack.push(node);\r\n        currentParent = node        \r\n    };\r\n    function end(tag){\r\n        let node = stack.pop();\r\n        currentParent = stack[stack.length - 1];\r\n    };\r\n    function chars(text){\r\n        text = text.replace(/\\s/g,'')\r\n        // console.log(text);\r\n        text && currentParent.children.push({\r\n            type: TEXT_TYPE,\r\n            text,\r\n            parent: currentParent\r\n        })\r\n        // console.log(\"currentParent: \",currentParent);\r\n    };\r\n    function advance(n){\r\n        html = html.substring(n)\r\n    }\r\n    function parseStartTag(){\r\n        const start = html.match(startTagOpen);\r\n        // console.log(\"1 start: \",start);\r\n        if(start){\r\n            const match = {\r\n                tarName:start[1],\r\n                attrs:[]\r\n            }\r\n            advance(start[0].length);\r\n            // console.log(\"2 html: \",html);\r\n            let attr,end;\r\n            // 如果不是开始标签就一直匹配下去\r\n            while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))){\r\n                advance(attr[0].length);\r\n                // console.log(\"3 attr: \",attr);\r\n                // console.log(\"4 html: \",html);\r\n                match.attrs.push({name:attr[1],value:attr[3] || attr[4] || attr[5] || true})\r\n                // console.log(\"5 match: \",match);\r\n            }\r\n            if(end){\r\n                // console.log(\"7 end: \",end);\r\n                advance(end[0].length)\r\n            }\r\n            // console.log(\"7 match: \",match);\r\n            return match\r\n        }\r\n        return false\r\n    }\r\n    while(html){\r\n        let textEnd = html.indexOf('<');\r\n        // console.log(\"8 html: \",html);\r\n        // console.log(\"8 textEnd: \",textEnd);\r\n        if(textEnd == 0){\r\n            const startTagMatch = parseStartTag();\r\n            // console.log(\"startTagMatch: \",startTagMatch);\r\n            if(startTagMatch){\r\n                // console.log(\"9 startTagMatch: \",startTagMatch);\r\n                start(startTagMatch.tarName, startTagMatch.attrs)\r\n                continue;\r\n            }\r\n            let endTagMatch = html.match(endTag);\r\n            if(endTagMatch){\r\n                advance(endTagMatch[0].length);\r\n                end(endTagMatch[0])\r\n                continue;\r\n            }\r\n        }\r\n        if(textEnd > 0){\r\n            let text = html.substring(0, textEnd);\r\n            // console.log(\"9 text: \",text);\r\n            if(text){\r\n                advance(text.length)\r\n                chars(text)\r\n            }            \r\n        }\r\n    }\r\n    // console.log(\"10 html: \",html);\r\n    // console.log(\"10 root: \",root);\r\n    return root;\r\n}","import {parseHTML} from './parse'\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\n\r\nfunction genProps(attrs){\r\n    // console.log(attrs);\r\n    let str = '';\r\n    for(let i = 0; i<attrs.length; i++){\r\n        let attr = attrs[i];\r\n        if(attr.name == 'style'){\r\n            let obj = {};\r\n            attr.value.split(';').forEach((item)=>{\r\n                let [key, value] = item.split(':');\r\n                obj[key] = value\r\n            })\r\n            attr.value = obj\r\n            // console.log(attr.value);\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n    }\r\n    return `{${str.slice(0,-1)}}`\r\n}\r\nfunction genchildren(children){\r\n    return children.map((child)=>{\r\n        // console.log(\"genchildren(children): \",child);\r\n        let text = gen(child)\r\n        // console.log(text);\r\n        return text\r\n    }).join(',')   \r\n}\r\nfunction gen(node) {\r\n    if (node.type === 1) {\r\n        return codegen(node);\r\n    } else {\r\n        // 文本\r\n        let text = node.text\r\n        if (!defaultTagRE.test(text)) {\r\n            return `_v(${JSON.stringify(text)})`\r\n        } else {\r\n            //_v( _s(name)+'hello' + _s(name))\r\n            let tokens = [];\r\n            \r\n            let match;\r\n            defaultTagRE.lastIndex = 0;\r\n            let lastIndex = 0;\r\n            // split\r\n            while (match = defaultTagRE.exec(text)) {\r\n                let index = match.index; // 匹配的位置  {{name}} hello  {{name}} hello \r\n                if (index > lastIndex) {\r\n                    tokens.push(JSON.stringify(text.slice(lastIndex, index)))\r\n                }\r\n                tokens.push(`_s(${match[1].trim()})`)\r\n                lastIndex = index + match[0].length\r\n            }\r\n            if (lastIndex < text.length) {\r\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n            }\r\n            return `_v(${tokens.join('+')})`\r\n        }\r\n    }\r\n}\r\nfunction codegen(ast){\r\n    let children = genchildren(ast.children)\r\n    // console.log(\"children: \",ast.children);\r\n    let code = (`_c('${ast.tag}',${ast.attrs.length > 0 ? genProps(ast.attrs) : 'null'},${ast.children.length ? `${children}` : ''})`)\r\n    // console.log(code);\r\n    return code\r\n};\r\n\r\nexport function compileToFunction(html){\r\n    let ast = parseHTML(html)\r\n    let code = codegen(ast);\r\n    \r\n    code = `with(this){return ${code}}`;   //with作用是使代码可以访问传进来的this的属性\r\n    let render = new Function(code);    //根据代码生成render函数\r\n\r\n    return render;\r\n}","// h()  _c()\r\nconst isReservedTag = (tag) => {\r\n    return ['a', 'div', 'p', 'button', 'ul', 'li', 'span'].includes(tag)\r\n}\r\n\r\nexport function createElementVNode(vm,tag, data, ...children){\r\n    // console.log(vm);\r\n    // console.log(\"tag: \",tag);\r\n    // console.log(\"data: \",data);\r\n    // console.log(\"...children: \",...children);\r\n    if(data == null){\r\n        data = {}\r\n    }\r\n    let key = data.key;\r\n    // console.log(\"data: \",data);\r\n    // console.log(\"key: \",key);\r\n    // console.log(data);\r\n    if(key){\r\n        delete data.key\r\n    }\r\n    if(isReservedTag(tag)){        \r\n        return vnode(vm,tag,key,data,children)\r\n    }else{\r\n        let Ctor = vm.$options.components[tag];        \r\n        // debugger\r\n        return createComponentVnode(vm, tag, key, data, children, Ctor)\r\n    }\r\n}\r\n\r\nfunction createComponentVnode(vm, tag, key, data, children, Ctor){    \r\n    // console.log(vm.$options._base); //拿到Vue       \r\n    if(typeof Ctor === 'object'){\r\n        Ctor = vm.$options._base.extend(Ctor);\r\n    } \r\n    data.hook = {\r\n        init(vnode){\r\n            let instance = vnode.componentInstance = new vnode.componentOptions.Ctor\r\n            instance.$mount();\r\n        }\r\n    }\r\n    return vnode(vm,tag,key,data,children,null, {Ctor})\r\n}\r\n\r\n//  _v()\r\nexport function createTextVNode(vm,text){\r\n    // console.log(\"text: \",text);\r\n    return vnode(vm,undefined,undefined,undefined,undefined,text)\r\n}\r\n\r\n// ast一样吗？ ast做的是语法层面的转化，他描述的是语法本身(html,css,js)，我们的虚拟DOM是\r\n// 描述的DOM元素，可以增加一些自定义的属性\r\nfunction vnode(vm,tag,key,data,children,text,componentOptions){\r\n    let node = {\r\n        vm,\r\n        tag,\r\n        key,\r\n        data,\r\n        children,\r\n        text,\r\n        componentOptions\r\n        //......\r\n    }\r\n    // console.log(node);\r\n    return node\r\n}\r\nexport function isSameVnode(vnode1, vnode2){\r\n    return vnode1.tag === vnode2.tag && vnode1.key === vnode2.key\r\n}","import {isSameVnode} from './index'\r\n\r\nfunction createComponent(vnode){\r\n    let i = vnode.data;\r\n    if((i = i.hook) && (i = i.init)){\r\n        // debugger\r\n        i(vnode); // 初始化组件 ， 找到init方法\r\n    }\r\n    if(vnode.componentInstance){\r\n        return true; // 说明是组件\r\n    }\r\n}\r\n\r\nexport function createElm(vnode){\r\n    //                (标签名 key)\r\n    //              vnode(div app)\r\n    //              /           \\\r\n    //    vonde(div div)         vnode(span span)\r\n    let {tag,data,children,text} = vnode;\r\n    if(typeof tag === 'string'){    //标签\r\n        // 创建真实元素，也要区分是组件还是元素\r\n        if(createComponent(vnode)){ // 组件 vnode.componentInstance.$el\r\n            // debugger\r\n            return vnode.componentInstance.$el;\r\n        }\r\n        vnode.el = document.createElement(tag); //这里将真实节点和虚拟节点对应起来，后续如果修改属性\r\n        patchProps(vnode.el, {}, data)\r\n        children.forEach((child) => {\r\n            // console.log(vnode);\r\n            vnode.el.appendChild(createElm(child))  //递归，不断地向vnode.el里添加html元素\r\n        })        \r\n    }else{\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el\r\n}\r\nexport function patchProps(el, oldProps = {}, props = {}){\r\n    // 老的属性有，新的没有，删除老的\r\n    let oldStyles = oldProps.style || {};\r\n    let newStyles = props.style || {};\r\n    for(let key in oldStyles){\r\n        if(!newStyles[key]){\r\n            el.style[key] = ''\r\n        }\r\n    }\r\n\r\n    for(let key in oldProps){   //老的属性有\r\n        if(!props[key]){    //新的没有要删除\r\n            el.removeAttribute(key);\r\n        }\r\n    }\r\n\r\n    for(let key in props){  //用新的覆盖老的\r\n        if(key === 'style'){\r\n            for(let styleName in props.style){\r\n                el.style[styleName] = props.style[styleName]\r\n            }\r\n        }else{\r\n            el.setAttribute(key, props[key])\r\n        }\r\n    }\r\n}\r\nexport function patch(oldVNode, vnode){\r\n    // mount()\r\n    if(!oldVNode){ // 这就是组件的挂载        \r\n        return createElm(vnode); // vm.$el  对应的就是组件渲染的结果了\r\n    }\r\n    // 写的是初渲染流程\r\n    // debugger\r\n    const isRealELement = oldVNode.nodeType;\r\n    // console.log(oldVNode.nodeType);\r\n    if(isRealELement){\r\n        const elm = oldVNode;\r\n        const parentElm = elm.parentNode;\r\n        // console.log(parentElm, vnode);\r\n        let newElm = createElm(vnode);\r\n        parentElm.insertBefore(newElm, elm.nextSibling);\r\n        parentElm.removeChild(elm);\r\n        // console.log(elm);\r\n        return newElm\r\n    }else{\r\n        return patchVnode(oldVNode, vnode)\r\n    }\r\n}\r\nfunction patchVnode(oldVNode, vnode){    \r\n    if(!isSameVnode(oldVNode, vnode)){\r\n        let el = createElm(vnode);\r\n        oldVNode.el.parentNode.replaceChild(el, oldVNode.el);\r\n        return el;\r\n    }\r\n    // 文本情况\r\n    // debugger\r\n    let el = vnode.el = oldVNode.el;    //复用老节点的文本\r\n    if(!oldVNode.tag){  //是文本\r\n        if(oldVNode.text !== vnode.text){\r\n            el.textContent = vnode.text\r\n        }\r\n    }\r\n    patchProps(el, oldVNode.data, vnode.data)\r\n\r\n    // 比较儿子节点\r\n    let oldChildren = oldVNode.children || [];\r\n    let newChildren = vnode.children || [];\r\n\r\n    if(oldChildren.length > 0 && newChildren.length > 0){\r\n        // 完整的diff算法,比较两者的孩子\r\n        updateChildren( el, oldChildren, newChildren )\r\n    }else if( newChildren.length > 0){\r\n        mountChildren(el, newChildren);\r\n    }else if( oldChildren.length > 0){\r\n        el.innerHTML = ''\r\n    }\r\n    return el;\r\n}\r\n\r\nfunction mountChildren(el, newChildren){\r\n    for(let i=0; i<newChildren.length; i++){\r\n        let child = newChildren[i];\r\n        el.appendChild(createElm(child))\r\n    }\r\n}\r\n\r\nfunction updateChildren( el, oldChildren, newChildren ){\r\n    // console.log(oldChildren, newChildren);\r\n    let oldStartIndex = 0;\r\n    let newStartIndex = 0;\r\n    let oldEndIndex = oldChildren.length - 1;\r\n    let newEndIndex = newChildren.length - 1;\r\n\r\n    let oldStartVnode = oldChildren[0];\r\n    let newStartVnode = newChildren[0];\r\n\r\n    let oldEndVnode = oldChildren[oldEndIndex];\r\n    let newEndVnode = newChildren[newEndIndex];\r\n\r\n    function makeIndexByKey(children){\r\n        let map = {}\r\n        children.forEach((child, index)=>{\r\n            map[child.key] = index\r\n        })\r\n        return map\r\n    }\r\n    let map = makeIndexByKey(oldChildren)\r\n\r\n    // 我们循环的时候为什么要用key\r\n    // 每次直接更新DOM\r\n    while(oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex){\r\n        if(!oldStartVnode){//处理因为索引表导致当前索引对应的旧节点出现undefined，需要跳过\r\n            oldStartVnode = oldChildren[++oldStartIndex]//头指针\r\n        }else if(!oldEndVnode){//处理因为索引表导致当前索引对应的旧节点出现undefined，需要跳过\r\n            oldEndVnode = oldChildren[--oldEndIndex]//尾指针\r\n        }else if(isSameVnode(oldStartVnode, newStartVnode)){  //头头比对\r\n            patchVnode(oldStartVnode, newStartVnode)    //相同节点，递归比较子节点\r\n            oldStartVnode = oldChildren[++oldStartIndex];\r\n            newStartVnode = newChildren[++newStartIndex];\r\n            // 开始比较开头节点\r\n        }else if(isSameVnode(oldEndVnode, newEndVnode)){  //尾尾比对\r\n            patchVnode(oldEndVnode, newEndVnode)    //相同节点，递归比较子节点\r\n            oldEndVnode = oldChildren[--oldEndIndex];\r\n            newEndVnode = newChildren[--newEndIndex];\r\n        }else if(isSameVnode(oldEndVnode, newStartVnode)){  //交叉比对\r\n            patchVnode(oldEndVnode, newStartVnode)  \r\n            el.insertBefore(oldEndVnode.el, oldStartVnode.el);\r\n            oldEndVnode = oldChildren[--oldEndIndex];\r\n            newStartVnode = newChildren[++newStartIndex];\r\n        }else if(isSameVnode(oldStartVnode, newEndVnode)){  //头尾  尾头\r\n            patchVnode(oldStartVnode, newEndVnode)  \r\n            // insertBefore具备移动性，会将原来的元素移走\r\n            el.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling);  //将老的尾巴移到前边去\r\n            oldStartVnode = oldChildren[++oldStartIndex];\r\n            newEndVnode = newChildren[--newEndIndex];\r\n        }else{\r\n            // 乱序比对\r\n            let moveIndex = map[newStartVnode.key];\r\n            if(moveIndex !== undefined){//判断老节点的孩子中是否有key为newStartVnode.key的child\r\n                let moveVnode = oldChildren[moveIndex];//有就找到对应的虚拟儿子节点\r\n                el.insertBefore(moveVnode.el, oldStartVnode.el);//直接将该孩子插入老节点的第一位，因为取的是新虚拟节点拍在第一位的节点\r\n                oldChildren[moveIndex] = undefined;//将该孩子原位置设为undefined，表示这个节点已经移走了，key正是为了这种情况创立的\r\n                patchVnode(moveVnode, newStartVnode);//比较属性和子节点\r\n            }else{\r\n                //表示老节点的孩子中没有key为newStartVnode.key的child，那么直接创建一个并且插入到旧虚拟节点的第一位\r\n                el.insertBefore(createElm(newStartVnode), oldStartVnode.el);\r\n            }\r\n            newStartVnode = newChildren[++newStartIndex]\r\n        }\r\n    }\r\n    // 经过之上的while循环之后，无非就剩下了两种情况：\r\n    //  1> 要么新节点还有多的，\r\n    //  2> 或者旧结点有多余的\r\n    if(newStartIndex <= newEndIndex){   //新的多了  多余的就插入进去\r\n        for(let i = newStartIndex; i <= newEndIndex; i++){\r\n            console.log(\"newStartIndex: \", newStartIndex);\r\n            console.log(\"newEndIndex: \", newEndIndex);\r\n            let childEl = createElm(newChildren[i])\r\n            // 这里可能是向前追加，也可能是向后追加\r\n            let anchor = newChildren[newEndIndex + 1] ?  newChildren[newEndIndex + 1].el : null;\r\n            // el.appendChild(childEl)\r\n            el.insertBefore(childEl, anchor)    //anchor为null则会认为是appendchildren\r\n        }\r\n    }\r\n\r\n    if(oldStartIndex <= oldEndIndex){   //老的多了  删除老的\r\n        for(let i = oldStartIndex; i <= oldEndIndex; i++){\r\n            if(oldChildren[i]){\r\n                let childEl = oldChildren[i].el\r\n                el.removeChild(childEl)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    // console.log(oldEndIndex,newEndIndex,oldStartVnode,newStartVnode,oldEndVnode,newEndVnode);\r\n}","import {createElementVNode, createTextVNode} from './vdom'\r\nimport {Watcher} from './observe/watcher'\r\nimport {createElm, patchProps, patch} from './vdom/patch'\r\n\r\nexport function initLifeCycle(Vue){\r\n    Vue.prototype._updata = function(vnode){\r\n        const vm = this;\r\n        const el = vm.$el;\r\n\r\n        const preVnode = vm._vnode;\r\n        vm._vnode = vnode;//组件第一次的渲染的虚拟节点保存到_vnode上\r\n\r\n        if(preVnode){//之前渲染过了\r\n            vm.$el = patch(preVnode, vnode)\r\n        }else{\r\n            vm.$el = patch(el, vnode)\r\n        }\r\n    }\r\n\r\n    // _c(\r\n    //     'div',\r\n    //     {id:\"app\",style:{\"color\":\"red\",\"background-color\":\"yellow\"}},\r\n    //     _c(\r\n    //         'div',\r\n    //         {style:{\"color\":\"red\"}},\r\n    //         _v(\r\n    //             _s(arr[3].JNTM)+\"Terraria\"+_s(arr[1])+\"Terraria\" //似乎会将_s的结果拼串\r\n    //         )\r\n    //     ),\r\n    //     _c('span',null,_v(_s(arr[2])))\r\n    // )\r\n    \r\n    // 根据_c _v _s生成的vnode是不一样的，tag(标签名)是不一样的，可以根据这个区分\r\n    // _c('div', {}, ...children)  ...arguments是 'div', {}, ...children\r\n    Vue.prototype._c = function(){       \r\n        return createElementVNode(this, ...arguments)\r\n    }\r\n    // _v(text)\r\n    Vue.prototype._v = function(){              \r\n        return createTextVNode(this, ...arguments)\r\n    }\r\n    Vue.prototype._s = function(value){      \r\n        if(typeof value !== 'object')  return value\r\n        return JSON.stringify(value)\r\n    }\r\n    Vue.prototype._render = function(){   \r\n        // debugger             \r\n        const vm = this;\r\n        // 让with中的this 指向 vm\r\n        // 当渲染的时候会去实例上取值，我们就可以将属性和视图绑定在一起\r\n        return vm.$options.render.call(vm)    // 通过ast语法转义后的render方法\r\n    }\r\n}\r\n\r\nexport function mountComponent(vm, el){\r\n    vm.$el = el;\r\n\r\n    // 1.调用render方法生成虚拟dom\r\n    // vm._render();   //vm.$options.render() 虚拟节点\r\n    const updataComponent = () => {\r\n        vm._updata(vm._render());   //虚拟节点扩展为真实节点        \r\n    }\r\n    // 我们可以给模板里的属性增加以一个收集器dep\r\n    // 页面渲染的时候 我们将渲染逻辑封装到watcher中  vm._updata(vm._render())\r\n    // 让dep记住这个wetcher即可，稍后属性表变化了可以找到对应的dep中的存放的wetcher进行\r\n    // 重新渲染\r\n    const watcher = new Watcher(vm, updataComponent, true)\r\n    // console.log(watcher);\r\n    \r\n    // 2.根据虚拟dom生成真实dom\r\n\r\n    // 3.插入到el元素中\r\n}\r\n\r\n// Vue核心流程\r\n// 1> 创造响应式数据\r\n// 1> 模板解析为ast语法树\r\n// 1> 将ast语法树转换为render函数，因为使用正则匹配，性能损耗比较大，所以转换为render函数\r\n// 1> 后续数据更新只需要重新执行render函数，无需再次执行ast转化\r\n\r\n// render函数会产生虚拟节点(使用响应式数据)\r\n// 根据生成的虚拟节点创造真实的DOM\r\n\r\nexport function callHook(vm, hook){ // 调用钩子函数\r\n    const handlers = vm.$options[hook];\r\n    // console.log(\"handlers: \",handlers);\r\n    if(handlers){\r\n        handlers.forEach((handler)=>{\r\n            handler.call(vm)\r\n        })\r\n    }\r\n}\r\n\r\n","// 静态方法\r\nconst strats = {};\r\nconst LIFECYCLE = [\"beforeCreate\", \"created\"];\r\nLIFECYCLE.forEach((hook) => {\r\n  strats[hook] = function (p, c) {\r\n    if (c) {\r\n      if (p) {\r\n        return p.concat(c);\r\n      } else {\r\n        return [c]; //儿子有父亲没有\r\n      }\r\n    } else {\r\n      return p; //如果儿子没有则用父亲即可\r\n    }\r\n  };\r\n});\r\n\r\nstrats.components = function(parentVal, childVal){\r\n  const res = Object.create(parentVal);\r\n  \r\n  if(childVal){\r\n    for(let key in childVal){      \r\n      // 返回的是构造的对象 可以拿到富强原型上的属性，并且将儿子的都拷贝到自己身上\r\n      // debugger\r\n      res[key] = childVal[key];\r\n    }\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\nexport function mergeOptions(parent, child) {\r\n  // console.log(\"parent: \",parent);\r\n  const options = {};\r\n\r\n  for (let key in parent) {\r\n    mergeField(key);\r\n  }\r\n  for (let key in child) {\r\n    if (!parent.hasOwnProperty(key)) {\r\n      mergeField(key);\r\n    }\r\n  }\r\n  function mergeField(key) {\r\n    // 策略模式，目的是减少if / else\r\n    if (strats[key]) {\r\n      options[key] = strats[key](parent[key], child[key]);\r\n    } else {\r\n      // 如果不在策略中\r\n      options[key] = child[key] || parent[key]; // 优先采用儿子\r\n    }\r\n  }  \r\n  // debugger\r\n  return options;\r\n}\r\n","import initState from \"./state\";\r\nimport {compileToFunction} from './compiler'\r\nimport {mountComponent, callHook} from './lifecycle'\r\nimport {mergeOptions} from './utils'\r\n\r\nexport function initMixin(Vue){\r\n    Vue.prototype._init = function(options){\r\n        const vm = this;\r\n        // 用户数据挂载到实例上  并合并\r\n        vm.$options = mergeOptions(this.constructor.options, options); \r\n\r\n        callHook(vm, 'beforeCreate')\r\n        // 初始状态\r\n        initState(vm);\r\n        callHook(vm, 'created')\r\n\r\n        if(options.el){\r\n            vm.$mount(options.el)\r\n        }\r\n    }\r\n\r\n    Vue.prototype.$mount = function(el){\r\n        // debugger\r\n        const vm = this;\r\n        el = document.querySelector(el);\r\n        let ops = vm.$options;\r\n        if(!ops.render){    // 查找有无render\r\n            let template;\r\n            if(!ops.template && el){        // 没写template用外部的template\r\n                template = el.outerHTML\r\n            }else{\r\n                // if(el){\r\n                    template = ops.template  // 写了template用自己的的template\r\n                // }\r\n            }\r\n            // console.log(template);\r\n            if(template){                \r\n                const render = compileToFunction(template)\r\n                ops.render = render\r\n            }\r\n        }\r\n        mountComponent(vm, el); //组件的挂载\r\n    }\r\n}\r\n\r\n","import {mergeOptions} from './utils'\r\n\r\nexport function initGlobalAPI(Vue) {\r\n  Vue.options = {\r\n    _base: Vue\r\n  };\r\n  Vue.mixin = function (mixin) {\r\n    // 我们希望将用户的选项和全局的options进行合并\r\n    this.options = mergeOptions(this.options, mixin);\r\n    return this;\r\n  };\r\n\r\n  Vue.extend = function(options){\r\n    // 就是实现根据用户的参数，返回一个构造函数而已\r\n    function Sub(options = {}){ //最终使用一个组件，就是new一个实例\r\n      // debugger\r\n      this._init(options);  //就是默认对子类进行初始化操作\r\n    }\r\n    Sub.prototype = Object.create(Vue.prototype); //Sub.prototype._proto_ === Vue.prototype\r\n    Sub.prototype.constructor = Sub;\r\n    // 将用户传递的选项的参数和全局的合并\r\n    Sub.options = mergeOptions(Vue.options, options);  //保存用户传递的选项\r\n    // debugger\r\n    return Sub\r\n  }\r\n  Vue.options.components = {}; //全局的指令\r\n  Vue.component = function(id, definition){\r\n    // 如果definition已经是一个函数了，说明用户自己调用了Vue.extend\r\n    definition = typeof definition === 'function' ? definition : Vue.extend(definition);\r\n    Vue.options.components[id] = definition\r\n  }\r\n}\r\n","import {initMixin} from './init'\r\nimport {initLifeCycle} from  './lifecycle'\r\nimport {initGlobalAPI} from './global'\r\nimport {initStateMixin} from './state'\r\nimport {createElm, patchProps, patch} from './vdom/patch'\r\nimport {compileToFunction} from './compiler/index'\r\n\r\nfunction Vue(options){\r\n    this._init(options)\r\n};\r\n\r\ninitMixin(Vue)  //扩展了init方法\r\ninitLifeCycle(Vue);\r\ninitGlobalAPI(Vue);//全局API\r\ninitStateMixin(Vue)//实现$nextTick $watch\r\n\r\n\r\nexport default Vue;"],"names":["oldArrayproto","Array","prototype","newArrayproto","Object","create","methods","forEach","method","_oldArrayproto$method","_len","arguments","length","args","_key","result","call","apply","concat","inserted","ob","__ob__","slice","observeArray","dep","notify","id","Dep","_classCallCheck","subs","_createClass","key","value","depend","target","addDep","addSub","watcher","push","updata","stack","pushTarget","popTarget","pop","Observe","data","defineProperties","_defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","item","observe","dependArray","i","current","childDep","get","set","newValue","_typeof","Watcher","vm","exprOrFn","options","cb","renderWatcher","getter","deps","depsId","Set","lazy","dirty","user","undefined","evaluate","has","add","queueWatcher","run","oldValue","queue","pending","flushSchedulerQueue","flusherQueue","q","nextTick","callbacks","waiting","flushCallbacks","cbs","timeFunc","Promise","resolve","then","MutationObserver","observer","textNode","document","createTextNode","characterData","textContent","setImmediate","setTimeout","initState","opts","$options","initData","computed","initComputed","watch","initWatch","proxy","newvalue","_data","handler","createWatcher","$watch","watchers","_createComputedGetter","userDef","fn","defineComputed","setter","defineProperty","createComputedGetter","initStateMixin","Vue","$nextTick","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","currentParent","root","createASTElement","tag","attrs","type","children","parent","start","tar","node","end","chars","text","replace","advance","n","substring","parseStartTag","match","tarName","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","str","_loop","obj","split","_item$split","_item$split2","_slicedToArray","JSON","stringify","genchildren","map","child","gen","join","codegen","test","tokens","lastIndex","exec","index","trim","ast","code","compileToFunction","render","Function","isReservedTag","includes","createElementVNode","vnode","Ctor","components","createComponentVnode","_base","extend","hook","init","instance","componentInstance","componentOptions","$mount","createTextVNode","isSameVnode","vnode1","vnode2","createComponent","createElm","$el","el","createElement","patchProps","appendChild","oldProps","props","oldStyles","style","newStyles","removeAttribute","styleName","setAttribute","patch","oldVNode","isRealELement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibling","removeChild","patchVnode","replaceChild","oldChildren","newChildren","updateChildren","mountChildren","innerHTML","oldStartIndex","newStartIndex","oldEndIndex","newEndIndex","oldStartVnode","newStartVnode","oldEndVnode","newEndVnode","makeIndexByKey","moveIndex","moveVnode","console","log","childEl","anchor","initLifeCycle","_updata","preVnode","_vnode","_c","_v","_s","_render","mountComponent","updataComponent","callHook","handlers","strats","LIFECYCLE","p","c","parentVal","childVal","res","mergeOptions","mergeField","hasOwnProperty","initMixin","_init","constructor","querySelector","ops","template","outerHTML","initGlobalAPI","mixin","Sub","component","definition"],"mappings":"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"}