{"version":3,"file":"vue.js","sources":["../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/state.js","../src/compiler/parse.js","../src/compiler/index.js","../src/vdom/index.js","../src/observe/watcher.js","../src/lifecycle.js","../src/utils.js","../src/init.js","../src/global.js","../src/index.js"],"sourcesContent":["let oldArrayproto = Array.prototype;\r\n\r\nexport let newArrayproto = Object.create(oldArrayproto);\r\n\r\nlet methods = [\r\n    \"shift\",\r\n    \"unshift\",\r\n    \"pop\",\r\n    \"push\",\r\n    \"reverse\",\r\n    \"sort\",\r\n    \"splice\"\r\n]// concat slice不会改变原数组\r\n\r\nmethods.forEach((method) => {\r\n    newArrayproto[method] = function(...args){  // 重写数组的方法\r\n        const result = oldArrayproto[method].call(this,...args);   // 内部调用原来的方法，函数劫持 切片编程\r\n        // console.log(method);\r\n\r\n        // 对对新增的数据再次观测\r\n        let inserted;\r\n        let ob = this.__ob__;  //外部data调用方法，所以this就指向data\r\n        switch(method){\r\n            case 'push':\r\n            case \"unshift\":     //vm.arr.unshift({a: 100})\r\n                inserted = args;\r\n                break;\r\n            case \"splice\":      //vm.arr.splice(0, 1, 55,56,57)\r\n                inserted = args.slice(2);\r\n                break;\r\n        }\r\n        // console.log(inserted);\r\n        if(inserted){\r\n            ob.observeArray(inserted)\r\n        }\r\n        return result;\r\n    }\r\n})\r\n\r\n","let id = 0;\r\n\r\nexport class Dep{\r\n    constructor(){\r\n        this.id = id++      // 属性的dep要收集watcher\r\n        this.subs = [];     //这里存放着当前属性对应的wetcher有哪些\r\n    }\r\n    depend(){\r\n        // 不希望放重复的watcher 而且刚才只是一个单向的关系  dep => Watcher\r\n        // this.subs.push(Dep.target);\r\n\r\n        Dep.target.addDep(this) //让watcher记住dep  双向\r\n        // watcher和Dep是一个多对多的关系(一个属性可以再多个组件中使用dep -> 多个watcher)\r\n        // 一个组件中由多个属性组成(一个watcher对应多个dep)\r\n    }\r\n    addSub(watcher){\r\n        this.subs.push(watcher)\r\n    }\r\n    notify(){\r\n        this.subs.forEach(watcher=>watcher.updata())\r\n    }\r\n}\r\n\r\nDep.target = null;\r\n\r\n","import {newArrayproto} from './array'\r\nimport {Dep} from './dep'\r\n\r\nclass Observe{\r\n    constructor(data){\r\n        // Object.defineProperty只能劫持已经存在的属性，vue2的$set就是为后加的属性添加响应式\r\n\r\n        // data.__ob__ = this //给data加上walk observeArray方法，array.js要使用以给新数据加上数据监测\r\n        // data.__ob__ = this;会发生死循环，__ob__会被当做walk的key,defineReactive\r\n        // 中调用observe，再次return new Observe(data)，又加上data.__proto__ = newArrayproto;\r\n        // 再次执行walk,陷入死循环，所以修改该属性为不可枚举即可解决\r\n        Object.defineProperties(data,{\r\n            ['__ob__']: \r\n            {\r\n                value: this,\r\n                enumerable: false\r\n            }\r\n        })\r\n\r\n        // 不能给数组中的每个基本数据类型加上响应式，但是引用数据类型要加上响应式\r\n        if(Array.isArray(data)){\r\n            data.__proto__ = newArrayproto\r\n            // 这里我们要重新重写数组的7个方法，但同时保留其他的方法\r\n            this.observeArray(data)\r\n        } else{\r\n            this.walk(data) \r\n        }              \r\n    }\r\n    walk(data){\r\n        // 重新定义属性  性能不太行\r\n        Object.keys(data).forEach(key => defineReactive(data,key,data[key]))\r\n    }\r\n    observeArray(data){\r\n        data.forEach(item => observe(item))\r\n    }\r\n}\r\n\r\nexport function defineReactive(target, key, value) {\r\n    observe(value);\r\n    let dep = new Dep();\r\n    // console.log(dep,key);\r\n    Object.defineProperties(target, {\r\n        [key]: {\r\n            get() {\r\n                if(Dep.target){\r\n                    dep.depend();//让这个属性收集器记住当前的watch\r\n                }\r\n                //修改数组元素为基本数据类型时之所以会有这个log，应该是外层的数据的get,\r\n                //不会出现打印console.log(\"用户取值了\", value); 的value为数组元素为基本数据类型的情况\r\n                // console.log(\"用户取值了\", value); \r\n                return value;\r\n            },\r\n            set(newValue) {\r\n                // console.log(\"用户更改值了\");\r\n                if (value === newValue) return;\r\n                observe(newValue);  // 每一个新值也同样需要进行数据代理\r\n                value = newValue;\r\n                dep.notify()\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport function observe(data){    \r\n    if(typeof data !== 'object' || data == null){\r\n        return;     // 只对对象数据劫持\r\n    }\r\n    if(data.__ob__ instanceof Observe) {    // 说明数据已经被劫持过，直接返回\r\n        return data.__ob__\r\n    }\r\n\r\n    // 被劫持过则不需要在劫持(判断是否被劫持,可以增添一个实例，用实例来判断是否被劫持过)\r\n    return new Observe(data)\r\n}","import { observe } from \"./observe/index\";\r\n\r\nexport default function initState(vm){\r\n    const opts = vm.$options;\r\n    if(opts.data){\r\n        initData(vm);\r\n    }\r\n}\r\n// vm._data 用vm 代理 使得读取vm._data.name可以简化为vm.name\r\nfunction proxy(vm, target, key){\r\n    Object.defineProperties(vm,{\r\n        [key]:\r\n        {\r\n            get(){\r\n                return vm[target][key]\r\n            },\r\n            set(newvalue){                \r\n                if(vm[target][key] === newvalue) return\r\n                vm[target][key] = newvalue\r\n            }\r\n        }\r\n    })\r\n}\r\nfunction initData(vm){\r\n    let data = vm.$options.data\r\n    data = typeof data === 'function' ? data.call(vm) : data;\r\n    vm._data = data;\r\n    // console.log(vm._data === data); // true\r\n    // 数据劫持\r\n    observe(data)   //Object.defineProperties重新递归定义递归\r\n\r\n    // vm._data 用vm 代理 使得读取vm._data.name可以简化为vm.name\r\n    for(let key in data){\r\n        proxy(vm, \"_data\", key)\r\n    }\r\n}","// Regular Expressions for parsing tags and attributes\r\nvar attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nvar dynamicArgAttribute = /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nvar unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\r\n// var ncname = \"[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z\".concat(unicodeRegExp.source, \"]*\");\r\nvar ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nvar qnameCapture = \"((?:\".concat(ncname, \"\\\\:)?\").concat(ncname, \")\");\r\nvar startTagOpen = new RegExp(\"^<\".concat(qnameCapture));\r\nvar startTagClose = /^\\s*(\\/?)>/;\r\nvar endTag = new RegExp(\"^<\\\\/\".concat(qnameCapture, \"[^>]*>\"));\r\nvar doctype = /^<!DOCTYPE [^>]+>/i;\r\n// #7298: escape - to avoid being passed as HTML comment when inlined in page\r\nvar comment = /^<!\\--/;\r\nvar conditionalComment = /^<!\\[/;\r\n// Special Elements (can contain anything)\r\n// var isPlainTextElement = makeMap('script,style,textarea', true);\r\nvar reCache = {};\r\nvar decodingMap = {\r\n    '&lt;': '<',\r\n    '&gt;': '>',\r\n    '&quot;': '\"',\r\n    '&amp;': '&',\r\n    '&#10;': '\\n',\r\n    '&#9;': '\\t',\r\n    '&#39;': \"'\"\r\n};\r\nvar encodedAttr = /&(?:lt|gt|quot|amp|#39);/g;\r\nvar encodedAttrWithNewLines = /&(?:lt|gt|quot|amp|#39|#10|#9);/g;\r\nvar defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\nvar regexEscapeRE = /[-.*+?^${}()|[\\]\\/\\\\]/g;\r\n\r\nexport function parseHTML(html){\r\n    const ELEMENT_TYPE = 1;\r\n    const TEXT_TYPE = 3;\r\n    let stack = [];\r\n    let currentParent;\r\n    let root;\r\n    function createASTElement(tag, attrs){\r\n        return {\r\n            tag,\r\n            type: ELEMENT_TYPE, \r\n            children: [],\r\n            attrs,\r\n            parent: null\r\n        }\r\n    };    \r\n    function start(tar, attrs){\r\n        // debugger\r\n        let node = createASTElement(tar,attrs);\r\n        if(!root){\r\n            root = node\r\n        }\r\n        if(currentParent){\r\n            node.parent = currentParent\r\n            currentParent.children.push(node)\r\n            // console.log(currentParent);\r\n        }\r\n        stack.push(node);\r\n        currentParent = node        \r\n    };\r\n    function end(tag){\r\n        let node = stack.pop();\r\n        currentParent = stack[stack.length - 1];\r\n    };\r\n    function chars(text){\r\n        text = text.replace(/\\s/g,'')\r\n        // console.log(text);\r\n        text && currentParent.children.push({\r\n            type: TEXT_TYPE,\r\n            text,\r\n            parent: currentParent\r\n        })\r\n        // console.log(\"currentParent: \",currentParent);\r\n    };\r\n    function advance(n){\r\n        html = html.substring(n)\r\n    }\r\n    function parseStartTag(){\r\n        const start = html.match(startTagOpen);\r\n        // console.log(\"1 start: \",start);\r\n        if(start){\r\n            const match = {\r\n                tarName:start[1],\r\n                attrs:[]\r\n            }\r\n            advance(start[0].length);\r\n            // console.log(\"2 html: \",html);\r\n            let attr,end;\r\n            // 如果不是开始标签就一直匹配下去\r\n            while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))){\r\n                advance(attr[0].length);\r\n                // console.log(\"3 attr: \",attr);\r\n                // console.log(\"4 html: \",html);\r\n                match.attrs.push({name:attr[1],value:attr[3] || attr[4] || attr[5] || true})\r\n                // console.log(\"5 match: \",match);\r\n            }\r\n            if(end){\r\n                // console.log(\"7 end: \",end);\r\n                advance(end[0].length)\r\n            }\r\n            // console.log(\"7 match: \",match);\r\n            return match\r\n        }\r\n        return false\r\n    }\r\n    while(html){\r\n        let textEnd = html.indexOf('<');\r\n        // console.log(\"8 html: \",html);\r\n        // console.log(\"8 textEnd: \",textEnd);\r\n        if(textEnd == 0){\r\n            const startTagMatch = parseStartTag();\r\n            // console.log(\"startTagMatch: \",startTagMatch);\r\n            if(startTagMatch){\r\n                // console.log(\"9 startTagMatch: \",startTagMatch);\r\n                start(startTagMatch.tarName, startTagMatch.attrs)\r\n                continue;\r\n            }\r\n            let endTagMatch = html.match(endTag);\r\n            if(endTagMatch){\r\n                advance(endTagMatch[0].length);\r\n                end(endTagMatch[0])\r\n                continue;\r\n            }\r\n        }\r\n        if(textEnd > 0){\r\n            let text = html.substring(0, textEnd);\r\n            // console.log(\"9 text: \",text);\r\n            if(text){\r\n                advance(text.length)\r\n                chars(text)\r\n            }            \r\n        }\r\n    }\r\n    // console.log(\"10 html: \",html);\r\n    // console.log(\"10 root: \",root);\r\n    return root;\r\n}","import {parseHTML} from './parse'\r\nvar defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\n\r\nfunction genProps(attrs){\r\n    // console.log(attrs);\r\n    let str = '';\r\n    for(let i = 0; i<attrs.length; i++){\r\n        let attr = attrs[i];\r\n        if(attr.name == 'style'){\r\n            let obj = {};\r\n            attr.value.split(';').forEach((item)=>{\r\n                let [key, value] = item.split(':');\r\n                obj[key] = value\r\n            })\r\n            attr.value = obj\r\n            // console.log(attr.value);\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n    }\r\n    return `{${str.slice(0,-1)}}`\r\n}\r\nfunction genchildren(children){\r\n    return children.map((child)=>{\r\n        // console.log(\"genchildren(children): \",child);\r\n        let text = gen(child)\r\n        // console.log(text);\r\n        return text\r\n    }).join(',')   \r\n}\r\nfunction gen(node){\r\n    // console.log(node.type);\r\n    if(node.type === 1){\r\n        // console.log(`gen(node)${node.type}`,node);\r\n        let text = codegen(node)\r\n        // console.log(\"gen(node):\",text);\r\n        return text\r\n    }else{\r\n        let text = node.text\r\n        // console.log(text);\r\n        if(!defaultTagRE.test(text)){\r\n            // console.log(`_v(${text})`);\r\n            return `_v(${text})`\r\n        }else{\r\n            let tokens = [];\r\n            let match;\r\n            defaultTagRE.lastIndex = 0\r\n            let lastIndex = 0;\r\n            while(match = defaultTagRE.exec(text)){\r\n                let index = match.index;\r\n                if(index > lastIndex){\r\n                    // console.log(text.slice(lastIndex, index));\r\n                    tokens.push(JSON.stringify(text.slice(lastIndex, index)))\r\n                }\r\n                // console.log(index,\"**\");\r\n                tokens.push(`_s(${match[1].trim()})`)\r\n                lastIndex = index + match[0].length\r\n            }\r\n            if(lastIndex < text.length){\r\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n            }\r\n            // console.log(\"tokens: \",tokens);\r\n            return `_v(${tokens.join('+')})`\r\n        }\r\n    }\r\n}\r\nfunction codegen(ast){\r\n    let children = genchildren(ast.children)\r\n    // console.log(\"children: \",ast.children);\r\n    let code = (`_c('${ast.tag}',${ast.attrs.length > 0 ? genProps(ast.attrs) : 'null'},${ast.children.length ? `${children}` : ''})`)\r\n    // console.log(code);\r\n    return code\r\n};\r\n\r\nexport function compileToFunction(html){\r\n    let ast = parseHTML(html)\r\n    let code = codegen(ast);\r\n    \r\n    // console.log(code);\r\n    code = `with(this){return ${code}}`;   //with作用是使代码可以访问传进来的this的属性\r\n    let render = new Function(code);    //根据代码生成render函数\r\n\r\n    return render;\r\n}","// h()  _c()\r\nexport function createElementVNode(vm,tag, data, ...children){\r\n    // console.log(vm);\r\n    // console.log(\"tag: \",tag);\r\n    // console.log(\"data: \",data);\r\n    // console.log(\"...children: \",...children);\r\n    if(data == null){\r\n        data = {}\r\n    }\r\n    let key = data.key;\r\n    // console.log(\"data: \",data);\r\n    // console.log(\"key: \",key);\r\n    // console.log(data);\r\n    if(key){\r\n        delete data.key\r\n    }\r\n    return vnode(vm,tag,key,data,children)\r\n}\r\n\r\n//  _v()\r\nexport function createTextVNode(vm,text){\r\n    return vnode(vm,undefined,undefined,undefined,undefined,text)\r\n}\r\n\r\n// ast一样吗？ ast做的是语法层面的转化，他描述的是语法本身(html,css,js)，我们的虚拟DOM是\r\n// 描述的DOM元素，可以增加一些自定义的属性\r\nfunction vnode(vm,tag,key,data,children,text){\r\n    return {\r\n        vm,\r\n        tag,\r\n        key,\r\n        data,\r\n        children,\r\n        text\r\n    }\r\n}","import { Dep } from \"./dep\";\r\n\r\nlet id = 0;\r\n\r\n// 给每个属性增加一个dep\r\nexport class Watcher{\r\n    constructor(vm, fn, options){\r\n        this.id = id++;\r\n        this.render = options;//表示是一个渲染函数\r\n        this.deps = [];     //后续实现计算属性和一些清理工作需要用到\r\n        this.depsId =new Set();\r\n        this.getter = fn;\r\n        this.get()   //意味着这个函数发生取值操作\r\n    }\r\n    get(){\r\n        // this:更新函数所在的那个watcher  类中的this都是实例 这里的this=> Watcher\r\n        Dep.target = this;  //静态属性就是只有一份  \r\n        this.getter();  //回去vm上取值\r\n        Dep.target = null;\r\n\r\n    }\r\n    addDep(dep){    //一个事件对应着多个属性 重复的属性也不用记录\r\n        let id = dep.id;\r\n        if(!this.depsId.has(id)){\r\n            this.deps.push(dep);\r\n            this.depsId.add(id);\r\n            dep.addSub(this);   //watcher已经记住了dep,此时让dep也记住watcher\r\n        }\r\n    }\r\n    updata(){\r\n        // this.get()  //重新更新\r\n        queueWatcher(this)  //把当前watcher存起来  放到一个队列里\r\n    };\r\n    run(){\r\n        console.log(\"run\");\r\n        this.get()\r\n    }\r\n}\r\nlet queue = [];\r\nlet has = {};\r\nlet pending = false;    //防抖\r\nfunction flushSchedulerQueue(){\r\n    let flusherQueue = queue.slice(0);\r\n    has = {};\r\n    queue = [];\r\n    pending = false;\r\n    flusherQueue.forEach((q)=>{\r\n        q.run()})\r\n}\r\nfunction queueWatcher(watcher){\r\n    const id = watcher.id;\r\n    if(!has[id]){   //一个watcher不重复刷新\r\n        queue.push(watcher);\r\n        has[id] = true;\r\n        if(!pending){\r\n            // setTimeout(flushSchedulerQueue,0)\r\n            nextTick(flushSchedulerQueue, 0)\r\n            pending = true\r\n        }\r\n    }\r\n}\r\n\r\nlet callbacks = [];\r\nlet waiting = false;\r\nfunction flushCallbacks(){\r\n    let cbs = callbacks.slice(0);\r\n    waiting = false;\r\n    callbacks = [];\r\n    cbs.forEach((cb)=>cb())\r\n}\r\n// nextTick没有直接使用某个api，而是采用优雅降级的方式\r\n// 内部先采用的是Promise,MutationObserver(h5的api), \r\nlet timeFunc;       //初始化文件时确定了该函数\r\nif(Promise){\r\n    timeFunc = ()=>{\r\n        Promise.resolve().then(flushCallbacks)\r\n    }\r\n}else if(MutationObserver){\r\n    let observer = new MutationObserver(flushCallbacks) //这里传入的回调是异步执行的\r\n    let textNode = document.createTextNode(1);\r\n    observer.observe(textNode,{\r\n        characterData: true\r\n    });\r\n    timeFunc = () => {\r\n        textNode.textContent = 2;\r\n    }\r\n}else if(setImmediate){\r\n    timeFunc = ()=>{\r\n        setImmediate(flushCallbacks);\r\n    }\r\n}else{\r\n    timeFunc = () => {\r\n        setTimeout(flushCallbacks)\r\n    }\r\n}\r\nexport function nextTick(cb){\r\n    callbacks.push(cb); //维护nextTick中的callback方法\r\n    if(!waiting){\r\n        // setTimeout(()=>{\r\n        //     flushCallbacks();\r\n        // }, 0)\r\n        timeFunc();\r\n        waiting = true;\r\n    }\r\n}","import {createElementVNode, createTextVNode} from './vdom'\r\nimport {Watcher} from './observe/watcher'\r\n\r\nfunction createElm(vnode){\r\n    //              (标签名 key)\r\n    //          vnode(div app)\r\n    //              /           \\\r\n    //    vonde(div div)         vnode(span span)\r\n    let {tag,data,children,text} = vnode;\r\n    if(typeof tag === 'string'){    //标签\r\n        vnode.el = document.createElement(tag); //这里将真实节点和虚拟节点对应起来，后续如果修改属性\r\n        patchProps(vnode.el, data)\r\n        children.forEach((child) => {\r\n            // console.log(vnode);\r\n            vnode.el.appendChild(createElm(child))  //递归，不断地向vnode.el里添加html元素\r\n        })        \r\n    }else{\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el\r\n}\r\nfunction patchProps(el, props){\r\n    for(let key in props){\r\n        if(key === 'style'){\r\n            for(let styleName in props.style){\r\n                el.style[styleName] = props.style[styleName]\r\n            }\r\n        }else{\r\n            el.setAttribute(key, props[key])\r\n        }\r\n    }\r\n}\r\nfunction patch(oldVNode, vnode){\r\n    // 写的是初渲染流程\r\n    const isRealELement = oldVNode.nodeType;\r\n    if(isRealELement){\r\n        const elm = oldVNode;\r\n        const parentElm = elm.parentNode;\r\n        // console.log(parentElm, vnode);\r\n        let newElm = createElm(vnode);\r\n        parentElm.insertBefore(newElm, elm.nextSibling);\r\n        parentElm.removeChild(elm);\r\n\r\n        return newElm\r\n    }else{\r\n        // diff算法\r\n    }\r\n}\r\nexport function initLifeCycle(Vue){\r\n    Vue.prototype._updata = function(vnode){\r\n        const vm = this;\r\n        const el = vm.$el;\r\n        let elm = patch(el, vnode);\r\n        vm.$el = elm\r\n    }\r\n\r\n    // _c(\r\n    //     'div',\r\n    //     {id:\"app\",style:{\"color\":\"red\",\"background-color\":\"yellow\"}},\r\n    //     _c(\r\n    //         'div',\r\n    //         {style:{\"color\":\"red\"}},\r\n    //         _v(\r\n    //             _s(arr[3].JNTM)+\"Terraria\"+_s(arr[1])+\"Terraria\" //似乎会将_s的结果拼串\r\n    //         )\r\n    //     ),\r\n    //     _c('span',null,_v(_s(arr[2])))\r\n    // )\r\n    \r\n    // 根据_c _v _s生成的vnode是不一样的，tag(标签名)是不一样的，可以根据这个区分\r\n    // _c('div', {}, ...children)  ...arguments是 'div', {}, ...children\r\n    Vue.prototype._c = function(){       \r\n        return createElementVNode(this, ...arguments)\r\n    }\r\n    // _v(text)\r\n    Vue.prototype._v = function(){      \r\n        return createTextVNode(this, ...arguments)\r\n    }\r\n    Vue.prototype._s = function(value){      \r\n        if(typeof value !== 'Object')  return value\r\n        return JSON.stringify(value)\r\n    }\r\n    Vue.prototype._render = function(){        \r\n        const vm = this;\r\n        // 让with中的this 指向 vm\r\n        // 当渲染的时候会去实例上取值，我们就可以将属性和视图绑定在一起\r\n        return vm.$options.render.call(vm)    // 通过ast语法转义后的render方法\r\n    }\r\n}\r\n\r\nexport function mountComponent(vm, el){\r\n    vm.$el = el;\r\n\r\n    // 1.调用render方法生成虚拟dom\r\n    // vm._render();   //vm.$options.render() 虚拟节点\r\n    const updataComponent = () => {\r\n        vm._updata(vm._render());   //虚拟节点扩展为真实节点\r\n    }\r\n    const watcher = new Watcher(vm, updataComponent, true)\r\n    // console.log(watcher);\r\n    \r\n    // 2.根据虚拟dom生成真实dom\r\n\r\n    // 3.插入到el元素中\r\n}\r\n\r\n// Vue核心流程\r\n// 1> 创造响应式数据\r\n// 1> 模板解析为ast语法树\r\n// 1> 将ast语法树转换为render函数，因为使用正则匹配，性能损耗比较大，所以转换为render函数\r\n// 1> 后续数据更新只需要重新执行render函数，无需再次执行ast转化\r\n\r\n// render函数会产生虚拟节点(使用响应式数据)\r\n// 根据生成的虚拟节点创造真实的DOM\r\n\r\nexport function callHook(vm, hook){ // 调用钩子函数\r\n    const handlers = vm.$options[hook];\r\n    if(handlers){\r\n        handlers.forEach((handler)=>{\r\n            handler.call(vm)\r\n        })\r\n    }\r\n}","// 静态方法\r\nconst strats = {};\r\nconst LIFECYCLE = [\"beforeCreate\", \"created\"];\r\nLIFECYCLE.forEach((hook) => {\r\n  strats[hook] = function (p, c) {\r\n    if (c) {\r\n      if (p) {\r\n        return p.concat(c);\r\n      } else {\r\n        return [c]; //儿子有父亲没有\r\n      }\r\n    } else {\r\n      return p; //如果儿子没有则用父亲即可\r\n    }\r\n  };\r\n});\r\nexport function mergeOptions(parent, child) {\r\n  const options = {};\r\n\r\n  for (let key in parent) {\r\n    mergeField(key);\r\n  }\r\n  for (let key in child) {\r\n    if (!parent.hasOwnProperty(key)) {\r\n      mergeField(key);\r\n    }\r\n  }\r\n  function mergeField(key) {\r\n    // 策略模式，目的是减少if / else\r\n    if (strats[key]) {\r\n      options[key] = strats[key](parent[key], child[key]);\r\n    } else {\r\n      // 如果不在策略中\r\n      options[key] = child[key] || parent[key]; // 优先采用儿子\r\n    }\r\n  }\r\n  return options;\r\n}\r\n","import initState from \"./state\";\r\nimport {compileToFunction} from './compiler'\r\nimport {mountComponent, callHook} from './lifecycle'\r\nimport {mergeOptions} from './utils'\r\n\r\nexport function initMixin(Vue){\r\n    Vue.prototype._init = function(options){\r\n        const vm = this;\r\n        // 用户数据挂载到实例上  并合并\r\n        vm.$options = mergeOptions(this.constructor.options, options); \r\n\r\n        callHook(vm, 'beforeCreate')\r\n        // 初始状态\r\n        initState(vm);\r\n        callHook(vm, 'created')\r\n\r\n        if(options.el){\r\n            vm.$mount(options.el)\r\n        }\r\n    }\r\n\r\n    Vue.prototype.$mount = function(el){\r\n        // debugger\r\n        const vm = this;\r\n        el = document.querySelector(el);\r\n        let ops = vm.$options;\r\n        if(!ops.render){    // 查找有无render\r\n            let template;\r\n            if(!ops.template && el){        // 没写template用外部的template\r\n                template = el.outerHTML\r\n            }else{\r\n                if(el){\r\n                    template = ops.template  // 写了template用自己的的template\r\n                }\r\n            }\r\n            // console.log(template);\r\n            if(template){\r\n                const render = compileToFunction(template)\r\n                ops.render = render\r\n            }\r\n        }\r\n        mountComponent(vm, el); //组件的挂载\r\n    }\r\n}\r\n\r\n","import {mergeOptions} from './utils'\r\n\r\nexport function initGlobalAPI(Vue) {\r\n  Vue.options = {};\r\n  Vue.mixin = function (mixin) {\r\n    // 我们希望将用户的选项和全局的options进行合并\r\n    this.options = mergeOptions(this.options, mixin);\r\n    return this;\r\n  };\r\n}\r\n","import {initMixin} from './init'\r\nimport {initLifeCycle} from  './lifecycle'\r\nimport { nextTick } from './observe/watcher';\r\nimport {initGlobalAPI} from './global'\r\n\r\nfunction Vue(options){\r\n    this._init(options)\r\n};\r\nVue.prototype.$nextTick = nextTick\r\ninitMixin(Vue)  //扩展了init方法\r\ninitLifeCycle(Vue);\r\ninitGlobalAPI(Vue);\r\n\r\n\r\n\r\n\r\n\r\nexport default Vue;"],"names":["oldArrayproto","Array","prototype","newArrayproto","Object","create","methods","forEach","method","_oldArrayproto$method","_len","arguments","length","args","_key","result","call","apply","concat","inserted","ob","__ob__","slice","observeArray","id","Dep","_classCallCheck","subs","_createClass","key","value","depend","target","addDep","addSub","watcher","push","notify","updata","Observe","data","defineProperties","_defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","item","observe","dep","get","set","newValue","_typeof","initState","vm","opts","$options","initData","proxy","newvalue","_data","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createASTElement","tag","attrs","type","children","parent","start","tar","node","end","pop","chars","text","replace","advance","n","substring","parseStartTag","match","tarName","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","str","_loop","i","obj","split","_item$split","_item$split2","_slicedToArray","JSON","stringify","genchildren","map","child","gen","join","codegen","test","tokens","lastIndex","exec","index","trim","ast","code","compileToFunction","render","Function","createElementVNode","vnode","createTextVNode","undefined","Watcher","fn","options","deps","depsId","Set","getter","has","add","queueWatcher","run","console","log","queue","pending","flushSchedulerQueue","flusherQueue","q","nextTick","callbacks","waiting","flushCallbacks","cbs","cb","timeFunc","Promise","resolve","then","MutationObserver","observer","textNode","document","createTextNode","characterData","textContent","setImmediate","setTimeout","createElm","el","createElement","patchProps","appendChild","props","styleName","style","setAttribute","patch","oldVNode","isRealELement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibling","removeChild","initLifeCycle","Vue","_updata","$el","_c","_v","_s","_render","mountComponent","updataComponent","callHook","hook","handlers","handler","strats","LIFECYCLE","p","c","mergeOptions","mergeField","hasOwnProperty","initMixin","_init","constructor","$mount","querySelector","ops","template","outerHTML","initGlobalAPI","mixin","$nextTick"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA,IAAIA,aAAa,GAAGC,KAAK,CAACC,SAAS,CAAA;EAE5B,IAAIC,aAAa,GAAGC,MAAM,CAACC,MAAM,CAACL,aAAa,CAAC,CAAA;EAEvD,IAAIM,OAAO,GAAG,CACV,OAAO,EACP,SAAS,EACT,KAAK,EACL,MAAM,EACN,SAAS,EACT,MAAM,EACN,QAAQ,CACX,CAAA;;EAEDA,OAAO,CAACC,OAAO,CAAC,UAACC,MAAM,EAAK;EACxBL,EAAAA,aAAa,CAACK,MAAM,CAAC,GAAG,YAAiB;EAAA,IAAA,IAAAC,qBAAA,CAAA;EAAA,IAAA,KAAA,IAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAALC,IAAI,GAAAZ,IAAAA,KAAA,CAAAS,IAAA,GAAAI,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA,EAAA,EAAA;EAAJD,MAAAA,IAAI,CAAAC,IAAA,CAAAH,GAAAA,SAAA,CAAAG,IAAA,CAAA,CAAA;EAAA,KAAA;EAAI;MACxC,IAAMC,MAAM,GAAG,CAAAN,qBAAA,GAAAT,aAAa,CAACQ,MAAM,CAAC,EAACQ,IAAI,CAAAC,KAAA,CAAAR,qBAAA,EAAA,CAAC,IAAI,CAAA,CAAAS,MAAA,CAAIL,IAAI,CAAC,CAAA,CAAC;EACxD;;EAEA;EACA,IAAA,IAAIM,QAAQ,CAAA;EACZ,IAAA,IAAIC,EAAE,GAAG,IAAI,CAACC,MAAM,CAAC;EACrB,IAAA,QAAOb,MAAM;EACT,MAAA,KAAK,MAAM,CAAA;EACX,MAAA,KAAK,SAAS;EAAM;EAChBW,QAAAA,QAAQ,GAAGN,IAAI,CAAA;EACf,QAAA,MAAA;EACJ,MAAA,KAAK,QAAQ;EAAO;EAChBM,QAAAA,QAAQ,GAAGN,IAAI,CAACS,KAAK,CAAC,CAAC,CAAC,CAAA;EACxB,QAAA,MAAA;EACR,KAAA;EACA;EACA,IAAA,IAAGH,QAAQ,EAAC;EACRC,MAAAA,EAAE,CAACG,YAAY,CAACJ,QAAQ,CAAC,CAAA;EAC7B,KAAA;EACA,IAAA,OAAOJ,MAAM,CAAA;KAChB,CAAA;EACL,CAAC,CAAC;;ECrCF,IAAIS,IAAE,GAAG,CAAC,CAAA;EAEV,IAAaC,GAAG,gBAAA,YAAA;EACZ,EAAA,SAAAA,MAAa;EAAAC,IAAAA,eAAA,OAAAD,GAAA,CAAA,CAAA;EACT,IAAA,IAAI,CAACD,EAAE,GAAGA,IAAE,EAAE,CAAM;EACpB,IAAA,IAAI,CAACG,IAAI,GAAG,EAAE,CAAC;EACnB,GAAA;EAACC,EAAAA,YAAA,CAAAH,GAAA,EAAA,CAAA;MAAAI,GAAA,EAAA,QAAA;MAAAC,KAAA,EACD,SAAAC,MAAAA,GAAQ;EACJ;EACA;;EAEAN,MAAAA,GAAG,CAACO,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC,CAAC;EACxB;EACA;EACJ,KAAA;EAAC,GAAA,EAAA;MAAAJ,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EACD,SAAAI,MAAOC,CAAAA,OAAO,EAAC;EACX,MAAA,IAAI,CAACR,IAAI,CAACS,IAAI,CAACD,OAAO,CAAC,CAAA;EAC3B,KAAA;EAAC,GAAA,EAAA;MAAAN,GAAA,EAAA,QAAA;MAAAC,KAAA,EACD,SAAAO,MAAAA,GAAQ;EACJ,MAAA,IAAI,CAACV,IAAI,CAACpB,OAAO,CAAC,UAAA4B,OAAO,EAAA;EAAA,QAAA,OAAEA,OAAO,CAACG,MAAM,EAAE,CAAA;SAAC,CAAA,CAAA;EAChD,KAAA;EAAC,GAAA,CAAA,CAAA,CAAA;EAAA,EAAA,OAAAb,GAAA,CAAA;EAAA,CAAA,EAAA,CAAA;EAGLA,GAAG,CAACO,MAAM,GAAG,IAAI;;ECtBQ,IAEnBO,OAAO,gBAAA,YAAA;IACT,SAAAA,OAAAA,CAAYC,IAAI,EAAC;EAAAd,IAAAA,eAAA,OAAAa,OAAA,CAAA,CAAA;EACb;;EAEA;EACA;EACA;EACA;MACAnC,MAAM,CAACqC,gBAAgB,CAACD,IAAI,EAAAE,eAAA,CAAA,EAAA,EACvB,QAAQ,EACT;EACIZ,MAAAA,KAAK,EAAE,IAAI;EACXa,MAAAA,UAAU,EAAE,KAAA;EAChB,KAAC,CACJ,CAAC,CAAA;;EAEF;EACA,IAAA,IAAG1C,KAAK,CAAC2C,OAAO,CAACJ,IAAI,CAAC,EAAC;QACnBA,IAAI,CAACK,SAAS,GAAG1C,aAAa,CAAA;EAC9B;EACA,MAAA,IAAI,CAACoB,YAAY,CAACiB,IAAI,CAAC,CAAA;EAC3B,KAAC,MAAK;EACF,MAAA,IAAI,CAACM,IAAI,CAACN,IAAI,CAAC,CAAA;EACnB,KAAA;EACJ,GAAA;EAACZ,EAAAA,YAAA,CAAAW,OAAA,EAAA,CAAA;MAAAV,GAAA,EAAA,MAAA;EAAAC,IAAAA,KAAA,EACD,SAAAgB,IAAKN,CAAAA,IAAI,EAAC;EACN;QACApC,MAAM,CAAC2C,IAAI,CAACP,IAAI,CAAC,CAACjC,OAAO,CAAC,UAAAsB,GAAG,EAAA;UAAA,OAAImB,cAAc,CAACR,IAAI,EAACX,GAAG,EAACW,IAAI,CAACX,GAAG,CAAC,CAAC,CAAA;SAAC,CAAA,CAAA;EACxE,KAAA;EAAC,GAAA,EAAA;MAAAA,GAAA,EAAA,cAAA;EAAAC,IAAAA,KAAA,EACD,SAAAP,YAAaiB,CAAAA,IAAI,EAAC;EACdA,MAAAA,IAAI,CAACjC,OAAO,CAAC,UAAA0C,IAAI,EAAA;UAAA,OAAIC,OAAO,CAACD,IAAI,CAAC,CAAA;SAAC,CAAA,CAAA;EACvC,KAAA;EAAC,GAAA,CAAA,CAAA,CAAA;EAAA,EAAA,OAAAV,OAAA,CAAA;EAAA,CAAA,EAAA,CAAA;EAGE,SAASS,cAAcA,CAAChB,MAAM,EAAEH,GAAG,EAAEC,KAAK,EAAE;IAC/CoB,OAAO,CAACpB,KAAK,CAAC,CAAA;EACd,EAAA,IAAIqB,GAAG,GAAG,IAAI1B,GAAG,EAAE,CAAA;EACnB;IACArB,MAAM,CAACqC,gBAAgB,CAACT,MAAM,EAAAU,eAAA,CAAA,EAAA,EACzBb,GAAG,EAAG;MACHuB,GAAG,EAAA,SAAAA,MAAG;QACF,IAAG3B,GAAG,CAACO,MAAM,EAAC;EACVmB,QAAAA,GAAG,CAACpB,MAAM,EAAE,CAAC;EACjB,OAAA;EACA;EACA;EACA;EACA,MAAA,OAAOD,KAAK,CAAA;OACf;MACDuB,GAAG,EAAA,SAAAA,GAACC,CAAAA,QAAQ,EAAE;EACV;QACA,IAAIxB,KAAK,KAAKwB,QAAQ,EAAE,OAAA;EACxBJ,MAAAA,OAAO,CAACI,QAAQ,CAAC,CAAC;EAClBxB,MAAAA,KAAK,GAAGwB,QAAQ,CAAA;QAChBH,GAAG,CAACd,MAAM,EAAE,CAAA;EAChB,KAAA;EACJ,GAAC,CACJ,CAAC,CAAA;EACN,CAAA;EAEO,SAASa,OAAOA,CAACV,IAAI,EAAC;IACzB,IAAGe,OAAA,CAAOf,IAAI,CAAA,KAAK,QAAQ,IAAIA,IAAI,IAAI,IAAI,EAAC;EACxC,IAAA,OAAO;EACX,GAAA;;EACA,EAAA,IAAGA,IAAI,CAACnB,MAAM,YAAYkB,OAAO,EAAE;EAAK;MACpC,OAAOC,IAAI,CAACnB,MAAM,CAAA;EACtB,GAAA;;EAEA;EACA,EAAA,OAAO,IAAIkB,OAAO,CAACC,IAAI,CAAC,CAAA;EAC5B;;ECvEe,SAASgB,SAASA,CAACC,EAAE,EAAC;EACjC,EAAA,IAAMC,IAAI,GAAGD,EAAE,CAACE,QAAQ,CAAA;IACxB,IAAGD,IAAI,CAAClB,IAAI,EAAC;MACToB,QAAQ,CAACH,EAAE,CAAC,CAAA;EAChB,GAAA;EACJ,CAAA;EACA;EACA,SAASI,KAAKA,CAACJ,EAAE,EAAEzB,MAAM,EAAEH,GAAG,EAAC;IAC3BzB,MAAM,CAACqC,gBAAgB,CAACgB,EAAE,EAAAf,eAAA,CAAA,EAAA,EACrBb,GAAG,EACJ;MACIuB,GAAG,EAAA,SAAAA,MAAE;EACD,MAAA,OAAOK,EAAE,CAACzB,MAAM,CAAC,CAACH,GAAG,CAAC,CAAA;OACzB;MACDwB,GAAG,EAAA,SAAAA,GAACS,CAAAA,QAAQ,EAAC;QACT,IAAGL,EAAE,CAACzB,MAAM,CAAC,CAACH,GAAG,CAAC,KAAKiC,QAAQ,EAAE,OAAA;EACjCL,MAAAA,EAAE,CAACzB,MAAM,CAAC,CAACH,GAAG,CAAC,GAAGiC,QAAQ,CAAA;EAC9B,KAAA;EACJ,GAAC,CACJ,CAAC,CAAA;EACN,CAAA;EACA,SAASF,QAAQA,CAACH,EAAE,EAAC;EACjB,EAAA,IAAIjB,IAAI,GAAGiB,EAAE,CAACE,QAAQ,CAACnB,IAAI,CAAA;EAC3BA,EAAAA,IAAI,GAAG,OAAOA,IAAI,KAAK,UAAU,GAAGA,IAAI,CAACxB,IAAI,CAACyC,EAAE,CAAC,GAAGjB,IAAI,CAAA;IACxDiB,EAAE,CAACM,KAAK,GAAGvB,IAAI,CAAA;EACf;EACA;IACAU,OAAO,CAACV,IAAI,CAAC,CAAG;;EAEhB;EACA,EAAA,KAAI,IAAIX,GAAG,IAAIW,IAAI,EAAC;EAChBqB,IAAAA,KAAK,CAACJ,EAAE,EAAE,OAAO,EAAE5B,GAAG,CAAC,CAAA;EAC3B,GAAA;EACJ;;ECnCA;EACA,IAAImC,SAAS,GAAG,2EAA2E,CAAA;EAG3F;EACA,IAAIC,MAAM,GAAiC,8BAAA,CAAA;EAC3C,IAAIC,YAAY,GAAG,MAAM,CAAChD,MAAM,CAAC+C,MAAM,EAAE,OAAO,CAAC,CAAC/C,MAAM,CAAC+C,MAAM,EAAE,GAAG,CAAC,CAAA;EACrE,IAAIE,YAAY,GAAG,IAAIC,MAAM,CAAC,IAAI,CAAClD,MAAM,CAACgD,YAAY,CAAC,CAAC,CAAA;EACxD,IAAIG,aAAa,GAAG,YAAY,CAAA;EAChC,IAAIC,MAAM,GAAG,IAAIF,MAAM,CAAC,OAAO,CAAClD,MAAM,CAACgD,YAAY,EAAE,QAAQ,CAAC,CAAC,CAAA;EAsBxD,SAASK,SAASA,CAACC,IAAI,EAAC;IAC3B,IAAMC,YAAY,GAAG,CAAC,CAAA;IACtB,IAAMC,SAAS,GAAG,CAAC,CAAA;IACnB,IAAIC,KAAK,GAAG,EAAE,CAAA;EACd,EAAA,IAAIC,aAAa,CAAA;EACjB,EAAA,IAAIC,IAAI,CAAA;EACR,EAAA,SAASC,gBAAgBA,CAACC,GAAG,EAAEC,KAAK,EAAC;MACjC,OAAO;EACHD,MAAAA,GAAG,EAAHA,GAAG;EACHE,MAAAA,IAAI,EAAER,YAAY;EAClBS,MAAAA,QAAQ,EAAE,EAAE;EACZF,MAAAA,KAAK,EAALA,KAAK;EACLG,MAAAA,MAAM,EAAE,IAAA;OACX,CAAA;EACL,GAAA;EACA,EAAA,SAASC,KAAKA,CAACC,GAAG,EAAEL,KAAK,EAAC;EACtB;EACA,IAAA,IAAIM,IAAI,GAAGR,gBAAgB,CAACO,GAAG,EAACL,KAAK,CAAC,CAAA;MACtC,IAAG,CAACH,IAAI,EAAC;EACLA,MAAAA,IAAI,GAAGS,IAAI,CAAA;EACf,KAAA;EACA,IAAA,IAAGV,aAAa,EAAC;QACbU,IAAI,CAACH,MAAM,GAAGP,aAAa,CAAA;EAC3BA,MAAAA,aAAa,CAACM,QAAQ,CAAC9C,IAAI,CAACkD,IAAI,CAAC,CAAA;EACjC;EACJ,KAAA;;EACAX,IAAAA,KAAK,CAACvC,IAAI,CAACkD,IAAI,CAAC,CAAA;EAChBV,IAAAA,aAAa,GAAGU,IAAI,CAAA;EACxB,GAAA;IACA,SAASC,GAAGA,CAACR,GAAG,EAAC;EACb,IAAWJ,KAAK,CAACa,GAAG,GAAE;MACtBZ,aAAa,GAAGD,KAAK,CAACA,KAAK,CAAC/D,MAAM,GAAG,CAAC,CAAC,CAAA;EAC3C,GAAA;IACA,SAAS6E,KAAKA,CAACC,IAAI,EAAC;MAChBA,IAAI,GAAGA,IAAI,CAACC,OAAO,CAAC,KAAK,EAAC,EAAE,CAAC,CAAA;EAC7B;EACAD,IAAAA,IAAI,IAAId,aAAa,CAACM,QAAQ,CAAC9C,IAAI,CAAC;EAChC6C,MAAAA,IAAI,EAAEP,SAAS;EACfgB,MAAAA,IAAI,EAAJA,IAAI;EACJP,MAAAA,MAAM,EAAEP,aAAAA;EACZ,KAAC,CAAC,CAAA;EACF;EACJ,GAAA;IACA,SAASgB,OAAOA,CAACC,CAAC,EAAC;EACfrB,IAAAA,IAAI,GAAGA,IAAI,CAACsB,SAAS,CAACD,CAAC,CAAC,CAAA;EAC5B,GAAA;IACA,SAASE,aAAaA,GAAE;EACpB,IAAA,IAAMX,KAAK,GAAGZ,IAAI,CAACwB,KAAK,CAAC7B,YAAY,CAAC,CAAA;EACtC;EACA,IAAA,IAAGiB,KAAK,EAAC;EACL,MAAA,IAAMY,KAAK,GAAG;EACVC,QAAAA,OAAO,EAACb,KAAK,CAAC,CAAC,CAAC;EAChBJ,QAAAA,KAAK,EAAC,EAAA;SACT,CAAA;EACDY,MAAAA,OAAO,CAACR,KAAK,CAAC,CAAC,CAAC,CAACxE,MAAM,CAAC,CAAA;EACxB;QACA,IAAIsF,IAAI,EAACX,IAAG,CAAA;EACZ;QACA,OAAM,EAAEA,IAAG,GAAGf,IAAI,CAACwB,KAAK,CAAC3B,aAAa,CAAC,CAAC,KAAK6B,IAAI,GAAG1B,IAAI,CAACwB,KAAK,CAAChC,SAAS,CAAC,CAAC,EAAC;EACvE4B,QAAAA,OAAO,CAACM,IAAI,CAAC,CAAC,CAAC,CAACtF,MAAM,CAAC,CAAA;EACvB;EACA;EACAoF,QAAAA,KAAK,CAAChB,KAAK,CAAC5C,IAAI,CAAC;EAAC+D,UAAAA,IAAI,EAACD,IAAI,CAAC,CAAC,CAAC;EAACpE,UAAAA,KAAK,EAACoE,IAAI,CAAC,CAAC,CAAC,IAAIA,IAAI,CAAC,CAAC,CAAC,IAAIA,IAAI,CAAC,CAAC,CAAC,IAAI,IAAA;EAAI,SAAC,CAAC,CAAA;EAC5E;EACJ,OAAA;;EACA,MAAA,IAAGX,IAAG,EAAC;EACH;EACAK,QAAAA,OAAO,CAACL,IAAG,CAAC,CAAC,CAAC,CAAC3E,MAAM,CAAC,CAAA;EAC1B,OAAA;EACA;EACA,MAAA,OAAOoF,KAAK,CAAA;EAChB,KAAA;EACA,IAAA,OAAO,KAAK,CAAA;EAChB,GAAA;EACA,EAAA,OAAMxB,IAAI,EAAC;EACP,IAAA,IAAI4B,OAAO,GAAG5B,IAAI,CAAC6B,OAAO,CAAC,GAAG,CAAC,CAAA;EAC/B;EACA;MACA,IAAGD,OAAO,IAAI,CAAC,EAAC;EACZ,MAAA,IAAME,aAAa,GAAGP,aAAa,EAAE,CAAA;EACrC;EACA,MAAA,IAAGO,aAAa,EAAC;EACb;UACAlB,KAAK,CAACkB,aAAa,CAACL,OAAO,EAAEK,aAAa,CAACtB,KAAK,CAAC,CAAA;EACjD,QAAA,SAAA;EACJ,OAAA;EACA,MAAA,IAAIuB,WAAW,GAAG/B,IAAI,CAACwB,KAAK,CAAC1B,MAAM,CAAC,CAAA;EACpC,MAAA,IAAGiC,WAAW,EAAC;EACXX,QAAAA,OAAO,CAACW,WAAW,CAAC,CAAC,CAAC,CAAC3F,MAAM,CAAC,CAAA;EAC9B2E,QAAAA,GAAG,CAACgB,WAAW,CAAC,CAAC,CAAC,CAAC,CAAA;EACnB,QAAA,SAAA;EACJ,OAAA;EACJ,KAAA;MACA,IAAGH,OAAO,GAAG,CAAC,EAAC;QACX,IAAIV,IAAI,GAAGlB,IAAI,CAACsB,SAAS,CAAC,CAAC,EAAEM,OAAO,CAAC,CAAA;EACrC;EACA,MAAA,IAAGV,IAAI,EAAC;EACJE,QAAAA,OAAO,CAACF,IAAI,CAAC9E,MAAM,CAAC,CAAA;UACpB6E,KAAK,CAACC,IAAI,CAAC,CAAA;EACf,OAAA;EACJ,KAAA;EACJ,GAAA;EACA;EACA;EACA,EAAA,OAAOb,IAAI,CAAA;EACf;;ECvIA,IAAI2B,YAAY,GAAG,0BAA0B,CAAA;EAE7C,SAASC,QAAQA,CAACzB,KAAK,EAAC;EACpB;IACA,IAAI0B,GAAG,GAAG,EAAE,CAAA;IAAC,IAAAC,KAAA,GAAAA,SAAAA,KAAAA,GACsB;EAC/B,IAAA,IAAIT,IAAI,GAAGlB,KAAK,CAAC4B,CAAC,CAAC,CAAA;EACnB,IAAA,IAAGV,IAAI,CAACC,IAAI,IAAI,OAAO,EAAC;QACpB,IAAIU,GAAG,GAAG,EAAE,CAAA;EACZX,MAAAA,IAAI,CAACpE,KAAK,CAACgF,KAAK,CAAC,GAAG,CAAC,CAACvG,OAAO,CAAC,UAAC0C,IAAI,EAAG;EAClC,QAAA,IAAA8D,WAAA,GAAmB9D,IAAI,CAAC6D,KAAK,CAAC,GAAG,CAAC;YAAAE,YAAA,GAAAC,cAAA,CAAAF,WAAA,EAAA,CAAA,CAAA;EAA7BlF,UAAAA,GAAG,GAAAmF,YAAA,CAAA,CAAA,CAAA;EAAElF,UAAAA,KAAK,GAAAkF,YAAA,CAAA,CAAA,CAAA,CAAA;EACfH,QAAAA,GAAG,CAAChF,GAAG,CAAC,GAAGC,KAAK,CAAA;EACpB,OAAC,CAAC,CAAA;QACFoE,IAAI,CAACpE,KAAK,GAAG+E,GAAG,CAAA;EAChB;EACJ,KAAA;;EACAH,IAAAA,GAAG,OAAAxF,MAAA,CAAOgF,IAAI,CAACC,IAAI,EAAAjF,GAAAA,CAAAA,CAAAA,MAAA,CAAIgG,IAAI,CAACC,SAAS,CAACjB,IAAI,CAACpE,KAAK,CAAC,EAAG,GAAA,CAAA,CAAA;KACvD,CAAA;EAZD,EAAA,KAAI,IAAI8E,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAC5B,KAAK,CAACpE,MAAM,EAAEgG,CAAC,EAAE,EAAA;MAAAD,KAAA,EAAA,CAAA;EAAA,GAAA;IAalC,OAAAzF,GAAAA,CAAAA,MAAA,CAAWwF,GAAG,CAACpF,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,EAAA,GAAA,CAAA,CAAA;EAC9B,CAAA;EACA,SAAS8F,WAAWA,CAAClC,QAAQ,EAAC;EAC1B,EAAA,OAAOA,QAAQ,CAACmC,GAAG,CAAC,UAACC,KAAK,EAAG;EACzB;EACA,IAAA,IAAI5B,IAAI,GAAG6B,GAAG,CAACD,KAAK,CAAC,CAAA;EACrB;EACA,IAAA,OAAO5B,IAAI,CAAA;EACf,GAAC,CAAC,CAAC8B,IAAI,CAAC,GAAG,CAAC,CAAA;EAChB,CAAA;EACA,SAASD,GAAGA,CAACjC,IAAI,EAAC;EACd;EACA,EAAA,IAAGA,IAAI,CAACL,IAAI,KAAK,CAAC,EAAC;EACf;EACA,IAAA,IAAIS,IAAI,GAAG+B,OAAO,CAACnC,IAAI,CAAC,CAAA;EACxB;EACA,IAAA,OAAOI,IAAI,CAAA;EACf,GAAC,MAAI;EACD,IAAA,IAAIA,KAAI,GAAGJ,IAAI,CAACI,IAAI,CAAA;EACpB;EACA,IAAA,IAAG,CAACc,YAAY,CAACkB,IAAI,CAAChC,KAAI,CAAC,EAAC;EACxB;QACA,OAAAxE,KAAAA,CAAAA,MAAA,CAAawE,KAAI,EAAA,GAAA,CAAA,CAAA;EACrB,KAAC,MAAI;QACD,IAAIiC,MAAM,GAAG,EAAE,CAAA;EACf,MAAA,IAAI3B,KAAK,CAAA;QACTQ,YAAY,CAACoB,SAAS,GAAG,CAAC,CAAA;QAC1B,IAAIA,SAAS,GAAG,CAAC,CAAA;QACjB,OAAM5B,KAAK,GAAGQ,YAAY,CAACqB,IAAI,CAACnC,KAAI,CAAC,EAAC;EAClC,QAAA,IAAIoC,KAAK,GAAG9B,KAAK,CAAC8B,KAAK,CAAA;UACvB,IAAGA,KAAK,GAAGF,SAAS,EAAC;EACjB;EACAD,UAAAA,MAAM,CAACvF,IAAI,CAAC8E,IAAI,CAACC,SAAS,CAACzB,KAAI,CAACpE,KAAK,CAACsG,SAAS,EAAEE,KAAK,CAAC,CAAC,CAAC,CAAA;EAC7D,SAAA;EACA;EACAH,QAAAA,MAAM,CAACvF,IAAI,CAAAlB,KAAAA,CAAAA,MAAA,CAAO8E,KAAK,CAAC,CAAC,CAAC,CAAC+B,IAAI,EAAE,MAAG,CAAC,CAAA;UACrCH,SAAS,GAAGE,KAAK,GAAG9B,KAAK,CAAC,CAAC,CAAC,CAACpF,MAAM,CAAA;EACvC,OAAA;EACA,MAAA,IAAGgH,SAAS,GAAGlC,KAAI,CAAC9E,MAAM,EAAC;EACvB+G,QAAAA,MAAM,CAACvF,IAAI,CAAC8E,IAAI,CAACC,SAAS,CAACzB,KAAI,CAACpE,KAAK,CAACsG,SAAS,CAAC,CAAC,CAAC,CAAA;EACtD,OAAA;EACA;EACA,MAAA,OAAA,KAAA,CAAA1G,MAAA,CAAayG,MAAM,CAACH,IAAI,CAAC,GAAG,CAAC,EAAA,GAAA,CAAA,CAAA;EACjC,KAAA;EACJ,GAAA;EACJ,CAAA;EACA,SAASC,OAAOA,CAACO,GAAG,EAAC;EACjB,EAAA,IAAI9C,QAAQ,GAAGkC,WAAW,CAACY,GAAG,CAAC9C,QAAQ,CAAC,CAAA;EACxC;EACA,EAAA,IAAI+C,IAAI,GAAA/G,MAAAA,CAAAA,MAAA,CAAW8G,GAAG,CAACjD,GAAG,EAAA7D,IAAAA,CAAAA,CAAAA,MAAA,CAAK8G,GAAG,CAAChD,KAAK,CAACpE,MAAM,GAAG,CAAC,GAAG6F,QAAQ,CAACuB,GAAG,CAAChD,KAAK,CAAC,GAAG,MAAM,EAAA9D,GAAAA,CAAAA,CAAAA,MAAA,CAAI8G,GAAG,CAAC9C,QAAQ,CAACtE,MAAM,GAAAM,EAAAA,CAAAA,MAAA,CAAMgE,QAAQ,CAAA,GAAK,EAAE,EAAI,GAAA,CAAA,CAAA;EAClI;EACA,EAAA,OAAO+C,IAAI,CAAA;EACf,CAAA;EAEO,SAASC,iBAAiBA,CAAC1D,IAAI,EAAC;EACnC,EAAA,IAAIwD,GAAG,GAAGzD,SAAS,CAACC,IAAI,CAAC,CAAA;EACzB,EAAA,IAAIyD,IAAI,GAAGR,OAAO,CAACO,GAAG,CAAC,CAAA;;EAEvB;EACAC,EAAAA,IAAI,wBAAA/G,MAAA,CAAwB+G,IAAI,EAAA,GAAA,CAAG,CAAC;IACpC,IAAIE,MAAM,GAAG,IAAIC,QAAQ,CAACH,IAAI,CAAC,CAAC;;EAEhC,EAAA,OAAOE,MAAM,CAAA;EACjB;;EClFA;EACO,SAASE,kBAAkBA,CAAC5E,EAAE,EAACsB,GAAG,EAAEvC,IAAI,EAAc;EACzD;EACA;EACA;EACA;IACA,IAAGA,IAAI,IAAI,IAAI,EAAC;MACZA,IAAI,GAAG,EAAE,CAAA;EACb,GAAA;EACA,EAAA,IAAIX,GAAG,GAAGW,IAAI,CAACX,GAAG,CAAA;EAClB;EACA;EACA;EACA,EAAA,IAAGA,GAAG,EAAC;MACH,OAAOW,IAAI,CAACX,GAAG,CAAA;EACnB,GAAA;IAAC,KAAAnB,IAAAA,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAd+CsE,QAAQ,OAAAjF,KAAA,CAAAS,IAAA,GAAAA,CAAAA,GAAAA,IAAA,WAAAI,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA,EAAA,EAAA;EAARoE,IAAAA,QAAQ,CAAApE,IAAA,GAAAH,CAAAA,CAAAA,GAAAA,SAAA,CAAAG,IAAA,CAAA,CAAA;EAAA,GAAA;IAexD,OAAOwH,KAAK,CAAC7E,EAAE,EAACsB,GAAG,EAAClD,GAAG,EAACW,IAAI,EAAC0C,QAAQ,CAAC,CAAA;EAC1C,CAAA;;EAEA;EACO,SAASqD,eAAeA,CAAC9E,EAAE,EAACiC,IAAI,EAAC;EACpC,EAAA,OAAO4C,KAAK,CAAC7E,EAAE,EAAC+E,SAAS,EAACA,SAAS,EAACA,SAAS,EAACA,SAAS,EAAC9C,IAAI,CAAC,CAAA;EACjE,CAAA;;EAEA;EACA;EACA,SAAS4C,KAAKA,CAAC7E,EAAE,EAACsB,GAAG,EAAClD,GAAG,EAACW,IAAI,EAAC0C,QAAQ,EAACQ,IAAI,EAAC;IACzC,OAAO;EACHjC,IAAAA,EAAE,EAAFA,EAAE;EACFsB,IAAAA,GAAG,EAAHA,GAAG;EACHlD,IAAAA,GAAG,EAAHA,GAAG;EACHW,IAAAA,IAAI,EAAJA,IAAI;EACJ0C,IAAAA,QAAQ,EAARA,QAAQ;EACRQ,IAAAA,IAAI,EAAJA,IAAAA;KACH,CAAA;EACL;;ECjCA,IAAIlE,EAAE,GAAG,CAAC,CAAA;;EAEV;EACA,IAAaiH,OAAO,gBAAA,YAAA;EAChB,EAAA,SAAAA,QAAYhF,EAAE,EAAEiF,EAAE,EAAEC,OAAO,EAAC;EAAAjH,IAAAA,eAAA,OAAA+G,OAAA,CAAA,CAAA;EACxB,IAAA,IAAI,CAACjH,EAAE,GAAGA,EAAE,EAAE,CAAA;EACd,IAAA,IAAI,CAAC2G,MAAM,GAAGQ,OAAO,CAAC;EACtB,IAAA,IAAI,CAACC,IAAI,GAAG,EAAE,CAAC;EACf,IAAA,IAAI,CAACC,MAAM,GAAE,IAAIC,GAAG,EAAE,CAAA;MACtB,IAAI,CAACC,MAAM,GAAGL,EAAE,CAAA;EAChB,IAAA,IAAI,CAACtF,GAAG,EAAE,CAAG;EACjB,GAAA;EAACxB,EAAAA,YAAA,CAAA6G,OAAA,EAAA,CAAA;MAAA5G,GAAA,EAAA,KAAA;MAAAC,KAAA,EACD,SAAAsB,GAAAA,GAAK;EACD;EACA3B,MAAAA,GAAG,CAACO,MAAM,GAAG,IAAI,CAAC;EAClB,MAAA,IAAI,CAAC+G,MAAM,EAAE,CAAC;QACdtH,GAAG,CAACO,MAAM,GAAG,IAAI,CAAA;EAErB,KAAA;EAAC,GAAA,EAAA;MAAAH,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EACD,SAAAG,MAAOkB,CAAAA,GAAG,EAAC;EAAK;EACZ,MAAA,IAAI3B,EAAE,GAAG2B,GAAG,CAAC3B,EAAE,CAAA;QACf,IAAG,CAAC,IAAI,CAACqH,MAAM,CAACG,GAAG,CAACxH,EAAE,CAAC,EAAC;EACpB,QAAA,IAAI,CAACoH,IAAI,CAACxG,IAAI,CAACe,GAAG,CAAC,CAAA;EACnB,QAAA,IAAI,CAAC0F,MAAM,CAACI,GAAG,CAACzH,EAAE,CAAC,CAAA;EACnB2B,QAAAA,GAAG,CAACjB,MAAM,CAAC,IAAI,CAAC,CAAC;EACrB,OAAA;EACJ,KAAA;EAAC,GAAA,EAAA;MAAAL,GAAA,EAAA,QAAA;MAAAC,KAAA,EACD,SAAAQ,MAAAA,GAAQ;EACJ;QACA4G,YAAY,CAAC,IAAI,CAAC,CAAE;EACxB,KAAA;EAAC,GAAA,EAAA;MAAArH,GAAA,EAAA,KAAA;MAAAC,KAAA,EACD,SAAAqH,GAAAA,GAAK;EACDC,MAAAA,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC,CAAA;QAClB,IAAI,CAACjG,GAAG,EAAE,CAAA;EACd,KAAA;EAAC,GAAA,CAAA,CAAA,CAAA;EAAA,EAAA,OAAAqF,OAAA,CAAA;EAAA,CAAA,EAAA,CAAA;EAEL,IAAIa,KAAK,GAAG,EAAE,CAAA;EACd,IAAIN,GAAG,GAAG,EAAE,CAAA;EACZ,IAAIO,OAAO,GAAG,KAAK,CAAC;EACpB,SAASC,mBAAmBA,GAAE;EAC1B,EAAA,IAAIC,YAAY,GAAGH,KAAK,CAAChI,KAAK,CAAC,CAAC,CAAC,CAAA;IACjC0H,GAAG,GAAG,EAAE,CAAA;EACRM,EAAAA,KAAK,GAAG,EAAE,CAAA;EACVC,EAAAA,OAAO,GAAG,KAAK,CAAA;EACfE,EAAAA,YAAY,CAAClJ,OAAO,CAAC,UAACmJ,CAAC,EAAG;MACtBA,CAAC,CAACP,GAAG,EAAE,CAAA;EAAA,GAAC,CAAC,CAAA;EACjB,CAAA;EACA,SAASD,YAAYA,CAAC/G,OAAO,EAAC;EAC1B,EAAA,IAAMX,EAAE,GAAGW,OAAO,CAACX,EAAE,CAAA;EACrB,EAAA,IAAG,CAACwH,GAAG,CAACxH,EAAE,CAAC,EAAC;EAAI;EACZ8H,IAAAA,KAAK,CAAClH,IAAI,CAACD,OAAO,CAAC,CAAA;EACnB6G,IAAAA,GAAG,CAACxH,EAAE,CAAC,GAAG,IAAI,CAAA;MACd,IAAG,CAAC+H,OAAO,EAAC;EACR;EACAI,MAAAA,QAAQ,CAACH,mBAAsB,CAAC,CAAA;EAChCD,MAAAA,OAAO,GAAG,IAAI,CAAA;EAClB,KAAA;EACJ,GAAA;EACJ,CAAA;EAEA,IAAIK,SAAS,GAAG,EAAE,CAAA;EAClB,IAAIC,OAAO,GAAG,KAAK,CAAA;EACnB,SAASC,cAAcA,GAAE;EACrB,EAAA,IAAIC,GAAG,GAAGH,SAAS,CAACtI,KAAK,CAAC,CAAC,CAAC,CAAA;EAC5BuI,EAAAA,OAAO,GAAG,KAAK,CAAA;EACfD,EAAAA,SAAS,GAAG,EAAE,CAAA;EACdG,EAAAA,GAAG,CAACxJ,OAAO,CAAC,UAACyJ,EAAE,EAAA;MAAA,OAAGA,EAAE,EAAE,CAAA;KAAC,CAAA,CAAA;EAC3B,CAAA;EACA;EACA;EACA,IAAIC,QAAQ,CAAC;EACb,IAAGC,OAAO,EAAC;IACPD,QAAQ,GAAG,SAAAA,QAAAA,GAAI;MACXC,OAAO,CAACC,OAAO,EAAE,CAACC,IAAI,CAACN,cAAc,CAAC,CAAA;KACzC,CAAA;EACL,CAAC,MAAK,IAAGO,gBAAgB,EAAC;EACtB,EAAA,IAAIC,QAAQ,GAAG,IAAID,gBAAgB,CAACP,cAAc,CAAC,CAAC;EACpD,EAAA,IAAIS,QAAQ,GAAGC,QAAQ,CAACC,cAAc,CAAC,CAAC,CAAC,CAAA;EACzCH,EAAAA,QAAQ,CAACpH,OAAO,CAACqH,QAAQ,EAAC;EACtBG,IAAAA,aAAa,EAAE,IAAA;EACnB,GAAC,CAAC,CAAA;IACFT,QAAQ,GAAG,SAAAA,QAAAA,GAAM;MACbM,QAAQ,CAACI,WAAW,GAAG,CAAC,CAAA;KAC3B,CAAA;EACL,CAAC,MAAK,IAAGC,YAAY,EAAC;IAClBX,QAAQ,GAAG,SAAAA,QAAAA,GAAI;MACXW,YAAY,CAACd,cAAc,CAAC,CAAA;KAC/B,CAAA;EACL,CAAC,MAAI;IACDG,QAAQ,GAAG,SAAAA,QAAAA,GAAM;MACbY,UAAU,CAACf,cAAc,CAAC,CAAA;KAC7B,CAAA;EACL,CAAA;EACO,SAASH,QAAQA,CAACK,EAAE,EAAC;EACxBJ,EAAAA,SAAS,CAACxH,IAAI,CAAC4H,EAAE,CAAC,CAAC;IACnB,IAAG,CAACH,OAAO,EAAC;EACR;EACA;EACA;EACAI,IAAAA,QAAQ,EAAE,CAAA;EACVJ,IAAAA,OAAO,GAAG,IAAI,CAAA;EAClB,GAAA;EACJ;;ECrGA,SAASiB,SAASA,CAACxC,KAAK,EAAC;EACrB;EACA;EACA;EACA;EACA,EAAA,IAAKvD,GAAG,GAAuBuD,KAAK,CAA/BvD,GAAG;MAACvC,IAAI,GAAkB8F,KAAK,CAA3B9F,IAAI;MAAC0C,QAAQ,GAASoD,KAAK,CAAtBpD,QAAQ;MAACQ,IAAI,GAAI4C,KAAK,CAAb5C,IAAI,CAAA;EAC3B,EAAA,IAAG,OAAOX,GAAG,KAAK,QAAQ,EAAC;EAAK;MAC5BuD,KAAK,CAACyC,EAAE,GAAGP,QAAQ,CAACQ,aAAa,CAACjG,GAAG,CAAC,CAAC;EACvCkG,IAAAA,UAAU,CAAC3C,KAAK,CAACyC,EAAE,EAAEvI,IAAI,CAAC,CAAA;EAC1B0C,IAAAA,QAAQ,CAAC3E,OAAO,CAAC,UAAC+G,KAAK,EAAK;EACxB;QACAgB,KAAK,CAACyC,EAAE,CAACG,WAAW,CAACJ,SAAS,CAACxD,KAAK,CAAC,CAAC,CAAE;EAC5C,KAAC,CAAC,CAAA;EACN,GAAC,MAAI;MACDgB,KAAK,CAACyC,EAAE,GAAGP,QAAQ,CAACC,cAAc,CAAC/E,IAAI,CAAC,CAAA;EAC5C,GAAA;IACA,OAAO4C,KAAK,CAACyC,EAAE,CAAA;EACnB,CAAA;EACA,SAASE,UAAUA,CAACF,EAAE,EAAEI,KAAK,EAAC;EAC1B,EAAA,KAAI,IAAItJ,GAAG,IAAIsJ,KAAK,EAAC;MACjB,IAAGtJ,GAAG,KAAK,OAAO,EAAC;EACf,MAAA,KAAI,IAAIuJ,SAAS,IAAID,KAAK,CAACE,KAAK,EAAC;UAC7BN,EAAE,CAACM,KAAK,CAACD,SAAS,CAAC,GAAGD,KAAK,CAACE,KAAK,CAACD,SAAS,CAAC,CAAA;EAChD,OAAA;EACJ,KAAC,MAAI;QACDL,EAAE,CAACO,YAAY,CAACzJ,GAAG,EAAEsJ,KAAK,CAACtJ,GAAG,CAAC,CAAC,CAAA;EACpC,KAAA;EACJ,GAAA;EACJ,CAAA;EACA,SAAS0J,KAAKA,CAACC,QAAQ,EAAElD,KAAK,EAAC;EAC3B;EACA,EAAA,IAAMmD,aAAa,GAAGD,QAAQ,CAACE,QAAQ,CAAA;EACvC,EAAA,IAAGD,aAAa,EAAC;MACb,IAAME,GAAG,GAAGH,QAAQ,CAAA;EACpB,IAAA,IAAMI,SAAS,GAAGD,GAAG,CAACE,UAAU,CAAA;EAChC;EACA,IAAA,IAAIC,MAAM,GAAGhB,SAAS,CAACxC,KAAK,CAAC,CAAA;MAC7BsD,SAAS,CAACG,YAAY,CAACD,MAAM,EAAEH,GAAG,CAACK,WAAW,CAAC,CAAA;EAC/CJ,IAAAA,SAAS,CAACK,WAAW,CAACN,GAAG,CAAC,CAAA;EAE1B,IAAA,OAAOG,MAAM,CAAA;EACjB,GACI;EAER,CAAA;EACO,SAASI,aAAaA,CAACC,GAAG,EAAC;EAC9BA,EAAAA,GAAG,CAACjM,SAAS,CAACkM,OAAO,GAAG,UAAS9D,KAAK,EAAC;MACnC,IAAM7E,EAAE,GAAG,IAAI,CAAA;EACf,IAAA,IAAMsH,EAAE,GAAGtH,EAAE,CAAC4I,GAAG,CAAA;EACjB,IAAA,IAAIV,GAAG,GAAGJ,KAAK,CAACR,EAAE,EAAEzC,KAAK,CAAC,CAAA;MAC1B7E,EAAE,CAAC4I,GAAG,GAAGV,GAAG,CAAA;KACf,CAAA;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACAQ,EAAAA,GAAG,CAACjM,SAAS,CAACoM,EAAE,GAAG,YAAU;EACzB,IAAA,OAAOjE,kBAAkB,CAAApH,KAAA,CAAC,KAAA,CAAA,EAAA,CAAA,IAAI,EAAAC,MAAA,CAAAjB,KAAA,CAAAC,SAAA,CAAAoB,KAAA,CAAAN,IAAA,CAAKL,SAAS,CAAC,CAAA,CAAA,CAAA;KAChD,CAAA;EACD;EACAwL,EAAAA,GAAG,CAACjM,SAAS,CAACqM,EAAE,GAAG,YAAU;EACzB,IAAA,OAAOhE,eAAe,CAAAtH,KAAA,CAAC,KAAA,CAAA,EAAA,CAAA,IAAI,EAAAC,MAAA,CAAAjB,KAAA,CAAAC,SAAA,CAAAoB,KAAA,CAAAN,IAAA,CAAKL,SAAS,CAAC,CAAA,CAAA,CAAA;KAC7C,CAAA;EACDwL,EAAAA,GAAG,CAACjM,SAAS,CAACsM,EAAE,GAAG,UAAS1K,KAAK,EAAC;EAC9B,IAAA,IAAG,OAAOA,KAAK,KAAK,QAAQ,EAAG,OAAOA,KAAK,CAAA;EAC3C,IAAA,OAAOoF,IAAI,CAACC,SAAS,CAACrF,KAAK,CAAC,CAAA;KAC/B,CAAA;EACDqK,EAAAA,GAAG,CAACjM,SAAS,CAACuM,OAAO,GAAG,YAAU;MAC9B,IAAMhJ,EAAE,GAAG,IAAI,CAAA;EACf;EACA;MACA,OAAOA,EAAE,CAACE,QAAQ,CAACwE,MAAM,CAACnH,IAAI,CAACyC,EAAE,CAAC,CAAI;KACzC,CAAA;EACL,CAAA;;EAEO,SAASiJ,cAAcA,CAACjJ,EAAE,EAAEsH,EAAE,EAAC;IAClCtH,EAAE,CAAC4I,GAAG,GAAGtB,EAAE,CAAA;;EAEX;EACA;EACA,EAAA,IAAM4B,eAAe,GAAG,SAAlBA,eAAeA,GAAS;MAC1BlJ,EAAE,CAAC2I,OAAO,CAAC3I,EAAE,CAACgJ,OAAO,EAAE,CAAC,CAAC;KAC5B,CAAA;;IACe,IAAIhE,OAAO,CAAChF,EAAE,EAAEkJ,eAAe,EAAE,IAAI,EAAC;EACtD;;EAEA;;EAEA;EACJ,CAAA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEO,SAASC,QAAQA,CAACnJ,EAAE,EAAEoJ,IAAI,EAAC;EAAE;EAChC,EAAA,IAAMC,QAAQ,GAAGrJ,EAAE,CAACE,QAAQ,CAACkJ,IAAI,CAAC,CAAA;EAClC,EAAA,IAAGC,QAAQ,EAAC;EACRA,IAAAA,QAAQ,CAACvM,OAAO,CAAC,UAACwM,OAAO,EAAG;EACxBA,MAAAA,OAAO,CAAC/L,IAAI,CAACyC,EAAE,CAAC,CAAA;EACpB,KAAC,CAAC,CAAA;EACN,GAAA;EACJ;;EC1HA;EACA,IAAMuJ,MAAM,GAAG,EAAE,CAAA;EACjB,IAAMC,SAAS,GAAG,CAAC,cAAc,EAAE,SAAS,CAAC,CAAA;EAC7CA,SAAS,CAAC1M,OAAO,CAAC,UAACsM,IAAI,EAAK;IAC1BG,MAAM,CAACH,IAAI,CAAC,GAAG,UAAUK,CAAC,EAAEC,CAAC,EAAE;EAC7B,IAAA,IAAIA,CAAC,EAAE;EACL,MAAA,IAAID,CAAC,EAAE;EACL,QAAA,OAAOA,CAAC,CAAChM,MAAM,CAACiM,CAAC,CAAC,CAAA;EACpB,OAAC,MAAM;EACL,QAAA,OAAO,CAACA,CAAC,CAAC,CAAC;EACb,OAAA;EACF,KAAC,MAAM;QACL,OAAOD,CAAC,CAAC;EACX,KAAA;KACD,CAAA;EACH,CAAC,CAAC,CAAA;;EACK,SAASE,YAAYA,CAACjI,MAAM,EAAEmC,KAAK,EAAE;IAC1C,IAAMqB,OAAO,GAAG,EAAE,CAAA;EAElB,EAAA,KAAK,IAAI9G,GAAG,IAAIsD,MAAM,EAAE;MACtBkI,UAAU,CAACxL,GAAG,CAAC,CAAA;EACjB,GAAA;EACA,EAAA,KAAK,IAAIA,IAAG,IAAIyF,KAAK,EAAE;EACrB,IAAA,IAAI,CAACnC,MAAM,CAACmI,cAAc,CAACzL,IAAG,CAAC,EAAE;QAC/BwL,UAAU,CAACxL,IAAG,CAAC,CAAA;EACjB,KAAA;EACF,GAAA;IACA,SAASwL,UAAUA,CAACxL,GAAG,EAAE;EACvB;EACA,IAAA,IAAImL,MAAM,CAACnL,GAAG,CAAC,EAAE;EACf8G,MAAAA,OAAO,CAAC9G,GAAG,CAAC,GAAGmL,MAAM,CAACnL,GAAG,CAAC,CAACsD,MAAM,CAACtD,GAAG,CAAC,EAAEyF,KAAK,CAACzF,GAAG,CAAC,CAAC,CAAA;EACrD,KAAC,MAAM;EACL;EACA8G,MAAAA,OAAO,CAAC9G,GAAG,CAAC,GAAGyF,KAAK,CAACzF,GAAG,CAAC,IAAIsD,MAAM,CAACtD,GAAG,CAAC,CAAC;EAC3C,KAAA;EACF,GAAA;;EACA,EAAA,OAAO8G,OAAO,CAAA;EAChB;;EChCO,SAAS4E,SAASA,CAACpB,GAAG,EAAC;EAC1BA,EAAAA,GAAG,CAACjM,SAAS,CAACsN,KAAK,GAAG,UAAS7E,OAAO,EAAC;MACnC,IAAMlF,EAAE,GAAG,IAAI,CAAA;EACf;EACAA,IAAAA,EAAE,CAACE,QAAQ,GAAGyJ,YAAY,CAAC,IAAI,CAACK,WAAW,CAAC9E,OAAO,EAAEA,OAAO,CAAC,CAAA;EAE7DiE,IAAAA,QAAQ,CAACnJ,EAAE,EAAE,cAAc,CAAC,CAAA;EAC5B;MACAD,SAAS,CAACC,EAAE,CAAC,CAAA;EACbmJ,IAAAA,QAAQ,CAACnJ,EAAE,EAAE,SAAS,CAAC,CAAA;MAEvB,IAAGkF,OAAO,CAACoC,EAAE,EAAC;EACVtH,MAAAA,EAAE,CAACiK,MAAM,CAAC/E,OAAO,CAACoC,EAAE,CAAC,CAAA;EACzB,KAAA;KACH,CAAA;EAEDoB,EAAAA,GAAG,CAACjM,SAAS,CAACwN,MAAM,GAAG,UAAS3C,EAAE,EAAC;EAC/B;MACA,IAAMtH,EAAE,GAAG,IAAI,CAAA;EACfsH,IAAAA,EAAE,GAAGP,QAAQ,CAACmD,aAAa,CAAC5C,EAAE,CAAC,CAAA;EAC/B,IAAA,IAAI6C,GAAG,GAAGnK,EAAE,CAACE,QAAQ,CAAA;EACrB,IAAA,IAAG,CAACiK,GAAG,CAACzF,MAAM,EAAC;EAAK;EAChB,MAAA,IAAI0F,QAAQ,CAAA;EACZ,MAAA,IAAG,CAACD,GAAG,CAACC,QAAQ,IAAI9C,EAAE,EAAC;EAAS;UAC5B8C,QAAQ,GAAG9C,EAAE,CAAC+C,SAAS,CAAA;EAC3B,OAAC,MAAI;EACD,QAAA,IAAG/C,EAAE,EAAC;EACF8C,UAAAA,QAAQ,GAAGD,GAAG,CAACC,QAAQ,CAAE;EAC7B,SAAA;EACJ,OAAA;EACA;EACA,MAAA,IAAGA,QAAQ,EAAC;EACR,QAAA,IAAM1F,MAAM,GAAGD,iBAAiB,CAAC2F,QAAQ,CAAC,CAAA;UAC1CD,GAAG,CAACzF,MAAM,GAAGA,MAAM,CAAA;EACvB,OAAA;EACJ,KAAA;EACAuE,IAAAA,cAAc,CAACjJ,EAAE,EAAEsH,EAAE,CAAC,CAAC;KAC1B,CAAA;EACL;;ECzCO,SAASgD,aAAaA,CAAC5B,GAAG,EAAE;EACjCA,EAAAA,GAAG,CAACxD,OAAO,GAAG,EAAE,CAAA;EAChBwD,EAAAA,GAAG,CAAC6B,KAAK,GAAG,UAAUA,KAAK,EAAE;EAC3B;MACA,IAAI,CAACrF,OAAO,GAAGyE,YAAY,CAAC,IAAI,CAACzE,OAAO,EAAEqF,KAAK,CAAC,CAAA;EAChD,IAAA,OAAO,IAAI,CAAA;KACZ,CAAA;EACH;;ECJA,SAAS7B,GAAGA,CAACxD,OAAO,EAAC;EACjB,EAAA,IAAI,CAAC6E,KAAK,CAAC7E,OAAO,CAAC,CAAA;EACvB,CAAA;EACAwD,GAAG,CAACjM,SAAS,CAAC+N,SAAS,GAAGtE,QAAQ,CAAA;EAClC4D,SAAS,CAACpB,GAAG,CAAC,CAAE;EAChBD,aAAa,CAACC,GAAG,CAAC,CAAA;EAClB4B,aAAa,CAAC5B,GAAG,CAAC;;;;;;;;"}