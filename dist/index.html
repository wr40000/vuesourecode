<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- <div id="app" style="color:skyblue;font-size: 15px;font-weight: 50;">
        {{arr[0]}}
        <span style="color:red">
            {{arr[3].JNTM}}  Terraria {{arr[1]}}
            <p>{{arr[2]}}</p>
        </span>
    </div> -->
    <!-- <div id="app" key="app" style="color:red;background-color:yellow;">
    {{work}}{{worker}}         
    </div> -->
    <div id="app"></div>
    <script src="vue.js"></script>
    <!-- <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.14/vue.js"></script> -->
    <script>
        // 数据监控
        // mixin
        // Vue.mixin({
        //     created() {
        //         console.log("mixin1");
        //     },
        //     a: 1
        // })
        // Vue.mixin({
        //     created() {
        //         console.log("mixin2");
        //     }
        // })
        const vm = new Vue({
            data() {
                return {
                    name: "随风",
                    work: "盗贼",
                    tool: {
                        "超亮火把": 689,
                        "铁皮药剂": 30
                    },
                    arr: ["FSX", "TONE", "DEAD", { "JNTM": "XHZ" },[1,2]],
                    a:{a:100}
                }
            },
            // el: "#app",
            // template: '<div>蔡徐坤</div>'
            // created() {
            //     console.log("created--self");
            // },
            computed:{
                worker:{
                    get(){
                        // console.log("run");
                        return this.name + this.work
                    },
                    set(newValue){
                        console.log(newValue);
                        // return newValue
                    }
                }
            },
            methods: {
                fn(newValue, oldValue){
                    console.log("fn");
                }
            },
            watch:{
                // 写法1: 直接写一个函数
                worker(newValue, oldValue){
                    console.log("写法1-newValue: ",newValue);
                    console.log("写法1-oldValue: ",oldValue);
                }
                // 'worker':(newValue, oldValue)=>{
                //     console.log("写法1-newValue: ",newValue);
                //     console.log("写法1-oldValue: ",oldValue);
                // }
                // 写法2: 数组
                // worker: [                    
                //     (newValue, oldValue) => {
                //         console.log("newValue: ",newValue);
                //     },
                //     (newValue, oldValue) => {
                //         console.log("newValue: ",newValue);
                //     }
                // ]
            }
        })
        vm.$mount('#app')

        // watch写法3: $watch
        // 底层其实调用的就是$watch的方法，即使方法1或者方法2，最终都是调用$watch
        // vm.$watch(
        //     () => vm.worker,
        //     // function exprOrFn(){return vm.worker},
        //     // 'work',    // 或者写成这样            
        //     function cb(newValue, oldValue){
        //         console.log("$watch-newValue: ",newValue);
        //         console.log("$watch-oldValue: ",oldValue);
        //     })

        // 属性和我们的视图关联起来，做到数据变化可以自动更新视图(观察者模式)

        // 现在还需要在数据变化后手动调用vm_updata 和 vm._render方法
        // setTimeout(()=>{
        //     vm.tool['铁皮药剂']++;
        //     vm.tool['铁皮药剂']++;
        //     vm.tool['铁皮药剂']++;
        //     vm.tool['铁皮药剂']++;
        //     vm.tool['铁皮药剂']++;
        //     vm.tool['铁皮药剂']++;
        // },500)

        // vm.name = "5555"
        // console.log(app.innerHTML);     //打印的name并不是5555
        // setTimeout(()=>{
        //     console.log(app.innerHTML);     //放到定时器里就可以打印name是5555 
        // },0)
        // Promise.resolve().then(()=>{
        //         console.log(app.innerHTML); //同步获取 打印name是5555
        // })



        // nextTick不是创建了异步任务，而是将这个任务维护到了队列中而已
        // vm.name = "5555"
        // vm.$nextTick(()=>{
        //     console.log("app.innerHTML: ",app.innerHTML);
        // })

        // mixin
        // console.log(vm.$options);

        // 数组更新实现原理
        // vm.arr.push(100).
        // vm.arr[4].push(100)
        // setTimeout(()=>{
        //     vm.a.b = 100;
        //     vm.a.__ob__.dep.notify();   //$set原理
        // },500)
    
        // 计算属性
        // setTimeout(()=>{
        //     console.log("111");
        //     vm.name = 123
        // },1000)

        // 监听属性
        // setTimeout(()=>{            
        //     vm.work = 123456
        //     vm.work = 123456789
        // },1000)
    </script>
</body>

</html>